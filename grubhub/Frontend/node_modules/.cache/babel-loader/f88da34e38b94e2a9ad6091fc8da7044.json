{"ast":null,"code":"var _jsxFileName = \"/Users/kirankumarbijjala/Documents/Redux Grubhub Final/Frontend/src/components/Buyerprofile.js\";\nimport React, { Component } from 'react';\nimport '../App.css';\nimport '../css/Buyerprofile.css';\nimport axios from 'axios';\nimport cookie from 'react-cookies';\nimport { Redirect } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport '../css/new.css';\nimport { getProfile } from '../actions';\nimport { connect } from 'react-redux';\nimport { Field, reduxForm } from 'redux-form';\nimport NavBar from './NavBar.js';\nimport { getUserImage } from '../actions'; //Define a Login Component\n\nclass Buyerprofile extends Component {\n  //call the constructor method\n  constructor(props) {\n    //Call the constrictor of Super class i.e The Component\n    super(props); //maintain the state required for this component\n\n    this.imageChangeHandler = e => {\n      // console.log('image change handle name: ' + e.target.name)\n      // console.log('image change handle value: ' + e.target.files[0])\n      this.setState({\n        file: e.target.files[0]\n      });\n    };\n\n    this.uploadImage = e => {\n      e.preventDefault(); // var headers = new Headers();\n\n      const formData = new FormData(); // console.log(this.state.file.name)\n\n      let email = sessionStorage.getItem('email'); // this.setState({file.name:email})\n      // var imagedata = document.querySelector('input[type=\"file\"]').files[0];\n\n      formData.append('myImage', this.state.file, email); // formData.append('myImage', this.state.file, email )\n      // formData.append('email', email)\n\n      const config = {\n        headers: {\n          'content-type': 'multipart/form-data'\n        }\n      };\n      axios.post('/userprofile', formData, config).then(response => {\n        let data = {\n          'email': email\n        };\n        axios.post('http://localhost:3001/userimage', data).then(response => {\n          // update the state with the response data\n          console.log('Axios get:', response.data);\n          this.setState({\n            profilepic: 'data:image/png;base64, ' + response.data\n          });\n        });\n        console.log('The file is successfully uploaded');\n      }).catch(error => {}); // prevent page from refresh\n    };\n\n    this.onSubmitUsername = formValues => {\n      console.log('OnSubmit' + formValues);\n      let data = {\n        firstname: formValues.firstname,\n        lastname: formValues.lastname,\n        email: formValues.email,\n        password: formValues.password\n      };\n      axios.defaults.withCredentials = true;\n      console.log(data);\n      axios.post('http://localhost:3001/update', data).then(response => {\n        console.log('Status Code : ', response.status);\n\n        if (response.status === 200) {\n          sessionStorage.setItem('email', data.email);\n          this.setState({\n            authFlag: true\n          });\n        }\n      }).catch(err => {\n        this.setState({\n          authFailed: true\n        });\n      });\n      this.props.loginuser(data);\n    };\n\n    this.fileSelectedHandler = e => {\n      console.log(e.target.files);\n\n      if (e.target.name == 'selectedFile') {\n        this.setState({\n          selectedFile: e.target.files[0]\n        });\n      } else {\n        this.setState({\n          [e.target.name]: e.target.value\n        });\n      }\n    };\n\n    this.inputChangeHandler = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.submitSignup = e => {\n      var headers = new Headers(); //prevent page from refresh\n\n      e.preventDefault();\n      const data = {\n        first_name: this.state.first_name,\n        last_name: this.state.last_name,\n        email: this.state.email,\n        password: this.state.password\n      }; //set the with credentials to true\n\n      axios.defaults.withCredentials = true; //make a post request with the user data\n\n      axios.post('http://localhost:3001/userprofile', data).then(response => {\n        console.log(\"Status Code : \", response.status);\n\n        if (response.status === 200) {\n          // <Redirect to=\"/home\"> </Redirect>\n          this.setState({\n            authFlag: true\n          });\n        } else {\n          this.setState({\n            authFlag: false\n          });\n        }\n      });\n    };\n\n    this.onSubmit = e => {\n      console.log(\"in submit profile\");\n      const data = {\n        first_name: this.state.first_name,\n        last_name: this.state.last_name,\n        email: this.state.email,\n        password: this.state.password,\n        phone: this.state.phone\n      };\n      console.log(\"in submit profile  data:\" + data);\n      this.props.getProfile(data, res => {\n        console.log(\"update profile\", res.data);\n\n        if (res.status === 200) {\n          console.log(res.data[0]); // sessionStorage.setItem('Email', res.data[0].Email);\n          // this.props.history.push('/login');\n        }\n      });\n    };\n\n    this.renderInput = ({\n      input,\n      label,\n      meta\n    }) => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        htmlFor: \"email\",\n        style: {\n          color: 'black'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, label), React.createElement(\"input\", Object.assign({\n        className: \"form-control\"\n      }, input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      })), this.renderError(meta));\n    };\n\n    this.renderError = ({\n      error,\n      touched\n    }) => {\n      if (touched && error) {\n        return React.createElement(\"label\", {\n          style: {\n            color: 'red'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222\n          },\n          __self: this\n        }, error);\n      }\n    };\n\n    this.state = {\n      first_name: \"\",\n      last_name: \"\",\n      profilepic: '',\n      email: \"\",\n      password: \"\",\n      nameflag: false,\n      authFlag: false,\n      failuser: false,\n      selectedFile: null,\n      phone: '',\n      newEmail: ''\n    };\n  } //Call the Will Mount to set the auth Flag to false\n\n\n  componentWillMount() {\n    let path = process.env.PUBLIC_URL;\n    path = path + '/profilepics/Avatar.png';\n    this.setState({\n      authFlag: false,\n      authFailed: false,\n      nameflag: false,\n      contactflag: false,\n      img: path,\n      passwordflag: false\n    });\n    let temp = sessionStorage.getItem('email');\n    let data = {\n      email: temp\n    };\n    console.log('Inside will mount: data value is: ' + data.email);\n    this.props.getProfile({\n      params: data\n    }, data => {\n      console.log('Redu test: ' + this.props.user);\n      this.setState({\n        email: data.email,\n        phonenumber: data.phone,\n        password: data.password,\n        firstname: data.first_name,\n        lastname: data.last_name\n      });\n    });\n  }\n\n  render() {\n    //redirect based on successful login\n    let createlogin = null;\n\n    if (!cookie.load('cookie')) {\n      createlogin = React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      });\n    }\n\n    let redirectVar = null;\n\n    if (this.state.authFlag) {\n      redirectVar = React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      });\n    }\n\n    let updatePic = null;\n\n    if (this.state.file !== '') {\n      updatePic = React.createElement(\"button\", {\n        style: {\n          marginLeft: '537px'\n        },\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, \"Update\");\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, createlogin, redirectVar, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-shift\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, \"Your account\"), React.createElement(\"ul\", {\n      class: \"nav flex-column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"new-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link active\",\n      href: \"/userprofile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"profilenew\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, \"Profile\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, \"Address and phone\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, \"Payments\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link \",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, \"Gift cards\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link new\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, \"Past orders\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, \"Upcoming orders\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, \"Refer a friend\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, \"Saved restaurants\")))))), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"login-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"column-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      style: {\n        fontWeight: \"bold\",\n        color: \"black\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, \"Your account\")), React.createElement(\"form\", {\n      onSubmit: this.uploadImage,\n      enctype: \"multipart/form-data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"preview text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      class: \"preview-img\" // src='http://simpleicon.com/wp-content/uploads/account.png'\n      ,\n      src: this.state.img,\n      alt: \"Preview Image\",\n      width: \"200\",\n      height: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      class: \"browse-input\",\n      type: \"file\",\n      onChange: this.imageChangeHandler,\n      name: \"myImage\",\n      id: \"myImage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    })), React.createElement(\"span\", {\n      class: \"Error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }), updatePic), React.createElement(\"div\", {\n      className: \"editname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, \"Edit account\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontWeight: 'bold',\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }, \"First name: \", this.state.first_name), React.createElement(\"div\", {\n      className: \"boxwidth-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"firstname\",\n      component: this.renderInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontWeight: 'bold',\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }, \"Last name: \", this.state.last_name, \" \"), React.createElement(\"div\", {\n      className: \"boxwidth-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"lastname\",\n      component: this.renderInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontWeight: 'bold',\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, \"Current password : ***** \"), React.createElement(\"div\", {\n      className: \"boxwidth-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"email\",\n      component: this.renderInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontWeight: 'bold',\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366\n      },\n      __self: this\n    }, \"Current Email: \", this.state.email), React.createElement(\"div\", {\n      className: \"boxwidth-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"phone\",\n      component: this.renderInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontWeight: 'bold',\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }, \"Current Phone: \", this.state.phone), React.createElement(\"div\", {\n      className: \"boxwidth-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"password\",\n      component: this.renderInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"wrapperbutton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"button-edit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }, \"update\"))))))));\n  }\n\n}\n\nconst validate = formValues => {\n  const error = {}; // Validate the inputs from 'values'\n\n  if (!formValues.firstname) {\n    error.firstname = \"Enter valid firstname\";\n  }\n\n  if (!formValues.lastname) {\n    error.lastname = \"Enter valid lastname\";\n  }\n\n  if (!formValues.Email) {\n    error.Email = \"Enter valid email\";\n  }\n\n  if (!formValues.phone) {\n    error.phone = \"Enter valid phone\";\n  }\n\n  if (!formValues.password) {\n    error.password = \"Enter valid password\";\n  } // If errors is empty, the form is fine to submit\n  // If errors has *any* properties, redux form assumes form is invalid\n\n\n  return error;\n};\n\nfunction mapStateToProps(state) {\n  return {\n    profile: state.profile\n  };\n}\n\nexport default connect(mapStateToProps, {\n  getProfile: getProfile,\n  getUserImage: getUserImage\n})(reduxForm({\n  validate,\n  form: 'Profile_Form'\n})(Buyerprofile));","map":{"version":3,"sources":["/Users/kirankumarbijjala/Documents/Redux Grubhub Final/Frontend/src/components/Buyerprofile.js"],"names":["React","Component","axios","cookie","Redirect","Link","getProfile","connect","Field","reduxForm","NavBar","getUserImage","Buyerprofile","constructor","props","imageChangeHandler","e","setState","file","target","files","uploadImage","preventDefault","formData","FormData","email","sessionStorage","getItem","append","state","config","headers","post","then","response","data","console","log","profilepic","catch","error","onSubmitUsername","formValues","firstname","lastname","password","defaults","withCredentials","status","setItem","authFlag","err","authFailed","loginuser","fileSelectedHandler","name","selectedFile","value","inputChangeHandler","submitSignup","Headers","first_name","last_name","onSubmit","phone","res","renderInput","input","label","meta","color","renderError","touched","nameflag","failuser","newEmail","componentWillMount","path","process","env","PUBLIC_URL","contactflag","img","passwordflag","temp","params","user","phonenumber","render","createlogin","load","redirectVar","updatePic","marginLeft","fontWeight","fontSize","validate","Email","mapStateToProps","profile","form"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../App.css';\nimport '../css/Buyerprofile.css';\nimport axios from 'axios';\nimport cookie from 'react-cookies';\nimport { Redirect } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport '../css/new.css';\nimport { getProfile } from '../actions'\nimport { connect } from 'react-redux';\nimport { Field, reduxForm } from 'redux-form';\nimport NavBar from './NavBar.js';\nimport {getUserImage} from '../actions'\n\n//Define a Login Component\nclass Buyerprofile extends Component {\n    //call the constructor method\n    constructor(props) {\n        //Call the constrictor of Super class i.e The Component\n        super(props);\n        //maintain the state required for this component\n        this.state = {\n            first_name: \"\",\n            last_name: \"\",\n            profilepic: '',\n            email: \"\",\n            password: \"\",\n            nameflag: false,\n            authFlag: false,\n            failuser: false,\n            selectedFile: null,\n            phone: '',\n            newEmail: ''\n        }\n    }\n\n    //Call the Will Mount to set the auth Flag to false\n\n    componentWillMount () {\n        let path = process.env.PUBLIC_URL\n        path = path + '/profilepics/Avatar.png'\n        \n        this.setState({\n          authFlag: false,\n          authFailed: false,\n          nameflag: false,\n          contactflag: false,\n          img: path,\n          passwordflag: false\n        })\n    \n        let temp = sessionStorage.getItem('email')\n    \n        let data = { email: temp }\n        console.log('Inside will mount: data value is: ' + data.email)\n    \n        this.props.getProfile({ params: data }, (data)=>{\n          console.log('Redu test: ' + this.props.user)\n          this.setState({\n            email: data.email,\n            phonenumber: data.phone,\n            password: data.password,\n            firstname: data.first_name,\n            lastname: data.last_name\n          })\n        });\n    \n    \n    }\n    imageChangeHandler = e => {\n        // console.log('image change handle name: ' + e.target.name)\n        // console.log('image change handle value: ' + e.target.files[0])\n        this.setState({\n          file: e.target.files[0]\n        })\n      }\n    \n      uploadImage = e => {\n        e.preventDefault()\n        // var headers = new Headers();\n        const formData = new FormData()\n        // console.log(this.state.file.name)\n    \n        let email = sessionStorage.getItem('email')\n        // this.setState({file.name:email})\n        // var imagedata = document.querySelector('input[type=\"file\"]').files[0];\n        formData.append('myImage', this.state.file, email)\n        // formData.append('myImage', this.state.file, email )\n        // formData.append('email', email)\n        const config = {\n          headers: {\n            'content-type': 'multipart/form-data'\n          }\n        }\n        axios\n          .post('/userprofile', formData, config)\n          .then(response => {\n            let data={'email':email}\n            axios.post('http://localhost:3001/userimage', data).then(response => {\n              // update the state with the response data\n              console.log('Axios get:', response.data)\n              this.setState({\n                profilepic: 'data:image/png;base64, ' + response.data\n              })\n            })\n            console.log('The file is successfully uploaded')\n          })\n          .catch(error => {})\n        // prevent page from refresh\n      }\n\n      onSubmitUsername = (formValues)=> {\n        console.log('OnSubmit'+formValues)\n        let data= {\n          firstname: formValues.firstname,\n          lastname: formValues.lastname,\n          email: formValues.email,\n          password: formValues.password\n        }\n        axios.defaults.withCredentials = true\n        console.log(data);\n        axios\n          .post('http://localhost:3001/update', data)\n          .then(response => {\n            console.log('Status Code : ', response.status)\n            if (response.status === 200) {\n              sessionStorage.setItem('email', data.email)\n              this.setState({\n                authFlag: true\n              })\n            }\n          })\n          .catch(err => {\n            this.setState({ authFailed: true })\n          })\n        this.props.loginuser(data);\n      }\n\n    fileSelectedHandler = e => {\n        console.log(e.target.files);\n        if (e.target.name == 'selectedFile') {\n            this.setState({\n                selectedFile: e.target.files[0]\n            })\n        } else {\n            this.setState({ [e.target.name]: e.target.value });\n        }\n    }\n\n    \n    //username change handler to update state variable with the text entered by the user\n    inputChangeHandler = (e) => {\n        this.setState({\n            [e.target.name]: e.target.value\n        })\n    }\n\n    //submit Login handler to send a request to the node backend\n    submitSignup = (e) => {\n        var headers = new Headers();\n        //prevent page from refresh\n        e.preventDefault();\n        const data = {\n            first_name: this.state.first_name,\n            last_name: this.state.last_name,\n            email: this.state.email,\n            password: this.state.password\n        }\n        //set the with credentials to true\n        axios.defaults.withCredentials = true;\n        //make a post request with the user data\n        axios.post('http://localhost:3001/userprofile', data)\n            .then(response => {\n                console.log(\"Status Code : \", response.status);\n                if (response.status === 200) {\n                    // <Redirect to=\"/home\"> </Redirect>\n                    this.setState({\n                        authFlag: true\n                    })\n                }\n                else {\n                    this.setState({\n                        authFlag: false\n\n                    })\n                }\n            })\n    }\n\n    onSubmit = (e) => {\n        console.log(\"in submit profile\");\n        const data = {\n            first_name: this.state.first_name,\n            last_name: this.state.last_name,\n            email: this.state.email,\n            password: this.state.password,\n            phone: this.state.phone,\n        }\n        console.log(\"in submit profile  data:\" + data);\n        this.props.getProfile(data\n            , (res) => {\n                console.log(\"update profile\", res.data);\n                if (res.status === 200) {\n                    console.log(res.data[0]);\n                    // sessionStorage.setItem('Email', res.data[0].Email);\n                    // this.props.history.push('/login');\n                }\n            })\n    }\n    renderInput = ({ input, label, meta }) => {\n        return (<div>\n            <div htmlFor='email' style={{ color: 'black' }}>\n                {label}\n            </div>\n            <input className=\"form-control\" {...input} />\n            {this.renderError(meta)}\n        </div>);\n    }\n\n    renderError = ({ error, touched }) => {\n        if (touched && error) {\n            return (<label style={{ color: 'red' }}>{error}</label>)\n        }\n\n\n    }\n\n\n\n\n    render() {\n        //redirect based on successful login\n        let createlogin = null;\n\n        if (!cookie.load('cookie')) {\n            createlogin = <Redirect to=\"/login\" />\n        }\n        let redirectVar = null;\n        if (this.state.authFlag) {\n            redirectVar = <Redirect to=\"/login\" />\n        }\n\n        let updatePic = null\n\n    if (this.state.file !== '') {\n      updatePic = (\n        <button\n          style={{ marginLeft: '537px' }}\n          type='submit'\n        >\n          Update\n        </button>\n      )\n    }\n\n        return (\n            <div>\n                {createlogin}\n                {redirectVar}\n                {/* <form onSubmit={this.props.handleSubmit(this.onSubmit)}> */}\n                    <div className=\"row\">\n                        <div className=\"col-sm-2\">\n                            <div className=\"col-shift\">\n                                <h2>Your account</h2>\n                                <ul class=\"nav flex-column\">\n                                    <li className=\"new-change\">\n                                        <a className=\"nav-link active\" href=\"/userprofile\" >\n                                            <span className=\"profilenew\">Profile</span></a></li>\n                                    <li><a className=\"nav-link\" href=\"#\" >\n                                        <span className=\"new\" >Address and phone</span></a></li>\n                                    <li><a className=\"nav-link\" href=\"#\" >\n                                        <span className=\"new\" >Payments</span></a></li>\n                                    <li><a className=\"nav-link \" href=\"#\" >\n                                        <span className=\"new\" >Gift cards</span></a></li>\n                                    <li><a className=\"nav-link new\" href=\"#\" >\n                                        <span className=\"new\" >Past orders</span></a></li>\n                                    <li><a className=\"nav-link\" href=\"#\">\n                                        <span className=\"new\" >Upcoming orders</span></a></li>\n                                    <li><a className=\"nav-link\" href=\"#\" >\n                                        <span className=\"new\" >Refer a friend</span></a></li>\n                                    <li><a className=\"nav-link\" href=\"#\" >\n                                        <span className=\"new\">Saved restaurants</span></a></li>\n                                </ul>\n                            </div>\n                        </div>\n\n                        <div className=\"col-sm-10\">\n                            <div class=\"container\">\n                                <div class=\"login-form\">\n                                    <div className=\"column-change\">\n                                        {/* <div class=\"main-div\"> */}\n                                        <div class=\"panel\">\n                                            <h2 style={{ fontWeight: \"bold\", color: \"black\" }}>Your account</h2>\n                                        </div>\n\n                                        <form onSubmit={this.uploadImage} enctype='multipart/form-data'>\n                  <div class='preview text-center'>\n                    <img\n                      class='preview-img'\n                      // src='http://simpleicon.com/wp-content/uploads/account.png'\n                      src={this.state.img}\n                      alt='Preview Image'\n                      width='200'\n                      height='200'\n                    />\n                      <input\n                        class='browse-input'\n                        type='file'\n                        onChange={this.imageChangeHandler}\n                        name='myImage'\n                        id='myImage'\n                      />\n                      <br />\n                    </div>\n                    <span class='Error' />\n                  {updatePic}\n                </form>\n\n                                        <div className=\"editname\">\n                                            <h3>Edit account</h3><br></br>\n                                        </div>\n                                        <div className=\"form-group\">\n                                            <div style={{ fontWeight: 'bold', fontSize: '18px' }}>First name: {this.state.first_name}</div>\n                                            <div className=\"boxwidth-change\">\n                                                <Field\n\n                                                    name=\"firstname\"\n                                                    component={this.renderInput}\n                                                />\n                                                {/* <input onChange={this.inputChangeHandler} type=\"text\" class=\"form-control\" name=\"firstname\" placeholder='Edit first name' /> */}\n                                            </div>\n                                        </div>\n\n                                        <div class=\"form-group\">\n                                            <div style={{ fontWeight: 'bold', fontSize: '18px' }}>Last name: {this.state.last_name} </div>\n                                            <div className=\"boxwidth-change\">\n                                                <Field\n\n                                                    name=\"lastname\"\n                                                    component={this.renderInput}\n                                                    \n                                                />\n                                                {/* <input onChange={this.inputChangeHandler} type=\"text\" class=\"form-control\" autoFocus name=\"lastname\" placeholder='Edit Last name'/> */}\n                                            </div>\n                                        </div>\n\n                                        <div class=\"form-group\">\n                                            <div style={{ fontWeight: 'bold', fontSize: '18px' }}>Current password : ***** </div>\n                                            <div className=\"boxwidth-change\">\n                                                <Field\n\n                                                    name=\"email\"\n                                                    component={this.renderInput}\n                                                    \n                                                />\n                                                {/* <input\n                                                    onChange={this.inputChangeHandler}\n                                                    type=\"password\"\n                                                    placeholder=\"Edit Password\"\n                                                    class=\"form-control\"\n                                                    name=\"password\" /> */}\n                                            </div>\n                                        </div>\n\n                                        <div className=\"form-group\">\n                                            <div style={{ fontWeight: 'bold', fontSize: '18px' }}>Current Email: {this.state.email}</div>\n                                            <div className=\"boxwidth-change\">\n                                                <Field\n\n                                                    name=\"phone\"\n                                                    component={this.renderInput}\n                                                    \n                                                />\n                                                {/* <input onChange={this.inputChangeHandler} type=\"text\" class=\"form-control\" name=\"Email\" placeholder='Edit Email' /> */}\n                                            </div>\n                                        </div>\n\n                                        <div className=\"form-group\">\n                                            <div style={{ fontWeight: 'bold', fontSize: '18px' }}>Current Phone: {this.state.phone}</div>\n                                            <div className=\"boxwidth-change\">\n                                                <Field\n\n                                                    name=\"password\"\n                                                    component={this.renderInput}\n                                                    \n                                                />\n                                                {/* <input onChange={this.inputChangeHandler} type=\"text\" class=\"form-control\" name=\"phone\" placeholder='Edit Phone' /> */}\n                                            </div>\n                                        </div>\n\n                                        <div className=\"wrapperbutton\">\n                                            <button type=\"submit\" className=\"button-edit\" >update</button>\n                                        </div>\n\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                \n            </div>\n\n\n\n\n        )\n    }\n}\n\nconst validate = (formValues) => {\n\n    const error = {};\n\n    // Validate the inputs from 'values'\n    if (!formValues.firstname) {\n        error.firstname = \"Enter valid firstname\";\n    }\n    if (!formValues.lastname) {\n        error.lastname = \"Enter valid lastname\";\n    }\n    if (!formValues.Email) {\n        error.Email = \"Enter valid email\";\n    }\n    if (!formValues.phone) {\n        error.phone = \"Enter valid phone\";\n    }\n    if (!formValues.password) {\n        error.password = \"Enter valid password\";\n    }\n\n    // If errors is empty, the form is fine to submit\n    // If errors has *any* properties, redux form assumes form is invalid\n    return error;\n}\n\nfunction mapStateToProps(state) {\n    return {\n        profile: state.profile\n    };\n}\n\nexport default connect(mapStateToProps, {getProfile: getProfile, getUserImage:getUserImage})(reduxForm({\n    validate,\n    form: 'Profile_Form'\n})(Buyerprofile));\n"]},"metadata":{},"sourceType":"module"}