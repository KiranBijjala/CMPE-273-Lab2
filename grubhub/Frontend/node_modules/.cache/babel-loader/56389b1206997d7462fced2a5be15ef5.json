{"ast":null,"code":"var _jsxFileName = \"/Users/kirankumarbijjala/Documents/Lab2/grubhub/Frontend/src/components/UpdateMenu/UpdateMenu.js\";\nimport React, { Component } from 'react';\nimport '../../App.css';\nimport './UpdateMenu.css';\nimport axios from 'axios';\nimport cookie from 'react-cookies';\nimport { Redirect } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { getProfile } from '../../actions';\nimport { loginuser } from '../../actions';\nimport { updaterestaurantmenu } from '../../actions';\nimport { menudetails } from '../../actions';\nimport { getUserImage } from '../../actions';\nimport { connect } from 'react-redux';\nimport DisplayOwnerNav from '../Display/DisplayOwnerNav';\nimport { Field, reduxForm } from 'redux-form'; // Define a Login Component\n\nclass Menu extends Component {\n  // call the constructor method\n  constructor(props) {\n    super(props);\n\n    this.inputChangeHandler = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.onSubmit = formValues => {\n      // let val = JSON.parse(sessionStorage.getItem('ownerdata'))\n      let menuid = sessionStorage.getItem('menuid'); // console.log('temp : ' +val.email)\n\n      let data = {\n        dishname: formValues.dishname,\n        description: formValues.description,\n        price: formValues.baseprice,\n        section: formValues.section,\n        id: menuid\n      };\n      axios.defaults.withCredentials = true;\n      this.props.updaterestaurantmenu(data, res => {\n        if (res.status === 200) {\n          console.log('Inside response', res.data[0]);\n          this.setState({\n            authFlag: true\n          });\n          this.props.history.push('/ownerrestaurantmenu');\n        } else {\n          alert('Please enter valid credentials');\n        }\n      }); // ,(response)=>{ //   console.log('Redux test: ' + this.props.user); //   console.log('Redux response: ' + response); // }) // console.log(data); // this.props.login(data, (response)=>{ //   console.log('Redux test: ' + this.props.user) //   this.setState({ //     img: 'data:image/png;base64, ' + response.image //   }) // });\n    };\n\n    this.renderError = ({\n      error,\n      touched\n    }) => {\n      if (touched && error) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          style: {\n            color: 'red'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, error));\n      }\n    };\n\n    this.renderInput = ({\n      input,\n      label,\n      text,\n      meta\n    }) => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        htmlFor: \"email\",\n        style: {\n          color: '#6b6b83'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, label, \":  \", text), React.createElement(\"input\", Object.assign({\n        className: \"form-control\" // style={{ marginRight: '10px' }}\n\n      }, input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      })), this.renderError(meta));\n    };\n\n    this.state = {\n      authFlag: false,\n      menudtls: '',\n      img: ''\n    };\n  }\n\n  componentWillMount() {\n    this.setState({\n      authFlag: false\n    });\n    let temp = sessionStorage.getItem('menuid'); // alert(temp)\n\n    this.props.menudetails({\n      params: {\n        id: temp\n      }\n    }, response => {\n      // console.log( this.props.user[1])\n      console.log(response);\n      this.setState({\n        menudtls: response.data\n      });\n    });\n  }\n\n  render() {\n    // redirect based on successful login\n    // let redirectVar = null\n    let invalidtag = null; // if (!cookie.load('cookie')) {\n    //   redirectVar = <Redirect to='/login' />\n    // }\n\n    let redirectVar = null;\n\n    if (sessionStorage.getItem('JWT' === null)) {\n      redirectVar = React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      });\n    }\n\n    if (this.state.authFailed) {\n      invalidtag = React.createElement(\"label\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"*Invalid\\xA0user\\xA0name\\xA0password!\");\n    }\n\n    let updatePic = null;\n\n    if (this.state.file !== '') {\n      updatePic = React.createElement(\"button\", {\n        style: {\n          marginLeft: '537px'\n        },\n        className: \"btn\\xA0btn-link\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0Update\");\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, redirectVar, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(DisplayOwnerNav, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"login-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.uploadImage,\n      enctype: \"multipart/form-data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: this.state.img,\n      width: \"200\",\n      height: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.imageChangeHandler,\n      name: \"myImage\",\n      id: \"myImage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }))), React.createElement(\"form\", {\n      className: \"ui\\xA0form\\xA0error\",\n      onSubmit: this.props.handleSubmit(this.onSubmit),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      class: \"list-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      class: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"Edit menu\"), React.createElement(\"div\", {\n      style: {\n        marginRight: '20px'\n      },\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(Field, {\n      class: \"form-control\",\n      name: \"dishname\",\n      component: this.renderInput,\n      label: \" Name\",\n      text: this.state.menudtls.dish_name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: {\n        marginRight: '20px'\n      },\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"description\",\n      type: \"text\",\n      component: this.renderInput,\n      label: \"Description\",\n      text: this.state.menudtls.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: {\n        marginRight: '20px'\n      },\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"section\",\n      component: this.renderInput,\n      label: \"Menu Section\",\n      text: this.state.menudtls.section,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        marginRight: '20px'\n      },\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"baseprice\",\n      type: \"text\",\n      component: this.renderInput,\n      label: \"Base Price\",\n      text: this.state.menudtls.price,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      class: \"btn btn-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, \"Edit Menu\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    })))))))))));\n  }\n\n} // export Login Component\n// export default BuyerProfile\n\n\nconst validate = formValues => {\n  const error = {};\n\n  if (!formValues.dishname) {\n    error.dishname = 'Enter a valid dish name';\n  }\n\n  if (!formValues.description) {\n    error.description = 'Enter a valid description';\n  }\n\n  if (!formValues.baseprice) {\n    error.baseprice = 'Enter a valid baseprice';\n  }\n\n  if (!formValues.section) {\n    error.section = 'Enter a valid section';\n  }\n\n  return error;\n};\n\nconst mapStateToProps = state => {\n  return {\n    owner: state.owner\n  };\n};\n\nexport default connect(mapStateToProps, {\n  updaterestaurantmenu,\n  menudetails\n})(reduxForm({\n  form: 'streamUpdateMenu',\n  validate: validate\n})(Menu)); // import React, { Component } from 'react'\n// import '../../App.css'\n// import './Menu.css'\n// import axios from 'axios'\n// import cookie from 'react-cookies'\n// import { Redirect } from 'react-router'\n// import { Link } from 'react-router-dom'\n// import { getProfile } from '../../actions'\n// import { loginuser } from '../../actions'\n// import { restaurantmenu } from '../../actions'\n// import { getUserImage } from '../../actions'\n// import { connect } from 'react-redux'\n// import DisplayOwnerNav from '../Display/DisplayOwnerNav'\n// import { Field, reduxForm } from 'redux-form'\n// class UpdateMenu extends React.Component {\n//     onSubmit = (formValues) => {\n//         // console.log('OnSubmit' + formValues)\n//         if(this.state.file!==''){\n//           this.uploadImage()\n//         }\n//         let val = JSON.parse(sessionStorage.getItem('ownerdata'));\n//         // console.log('temp : ' +val.email)\n//         let data = {\n//           dishname: formValues.dishname,\n//           description: formValues.description,\n//           price: formValues.baseprice,\n//           section: formValues.section,\n//           zipcode: val.restaurant_zipcode,\n//           restaurantname: val.restaurant_name,\n//           id:\n//         }\n//         axios.defaults.withCredentials = true // console.log(data) // axios //   .post('http://localhost:3001/login', data) //   .then(response => { //     console.log('Status Code : ', response.status) //     if (response.status === 200) { //       sessionStorage.setItem('email', data.email) //       this.setState({ //         authFlag: true //       }) //     } //   }) //   .catch(err => { //     this.setState({ authFailed: true }) //   })\n//         this.props.updaterestaurantmenu(data, res => {\n//           if (res.status === 200) {\n//             console.log('Inside response', res.data[0])\n//             this.setState({\n//               authFlag: true\n//             })\n//             this.props.history.push('/restaurantmenu')\n//           } else {\n//             alert('Please enter valid credentials')\n//           }\n//         }) // ,(response)=>{ //   console.log('Redux test: ' + this.props.user); //   console.log('Redux response: ' + response); // }) // console.log(data); // this.props.login(data, (response)=>{ //   console.log('Redux test: ' + this.props.user) //   this.setState({ //     img: 'data:image/png;base64, ' + response.image //   }) // });\n//       }\n//     inputChangeHandler = e => {\n//         this.setState({\n//           [e.target.name]: e.target.value\n//         })\n//       }\n//   render () {\n//     console.log(this.props)\n//     return (\n//       <div>\n//         <div className='row'>\n//           <div class='form-group'>\n//             <div className='col-sm-4'>\n//               <div>Name</div>\n//               <input\n//                 onChange={this.inputChangeHandler}\n//                 type='text'\n//                 class='form-control'\n//                 name='firstname'\n//                 value={this.state.firstname}\n//               />\n//             </div>\n//             <div className='col-sm-4'>\n//               <div>Description</div>\n//               <input\n//                 onChange={this.inputChangeHandler}\n//                 type='text'\n//                 class='form-control'\n//                 name='lastname'\n//                 value={this.state.lastname}\n//               />\n//             </div>\n//           </div>\n//         </div>\n//         <br />\n//         <div className='row'>\n//           <div class='form-group'>\n//             <div className='col-sm-4'>\n//               <div>Menu Section</div>\n//               <input\n//                 onChange={this.inputChangeHandler}\n//                 type='text'\n//                 class='form-control'\n//                 name='pswd'\n//               />\n//             </div>\n//             <div className='col-sm-4'>\n//               <div>Base Price</div>\n//               <input\n//                 onChange={this.inputChangeHandler}\n//                 type='text'\n//                 class='form-control'\n//                 name='pswd'\n//               />\n//             </div>\n//           </div>\n//         </div>\n//         <br />\n//         <div className='row'>\n//           <div class='form-group'>\n//             <div className='col-sm-3'>\n//               <button\n//                 onClick={this.updateUserName}\n//                 style={{ backgroundColor: '#0070eb' }}\n//                 class='btn btn-info'\n//               >\n//                 Update name\n//               </button>\n//             </div>\n//             <div className='col-sm-3'>\n//               <button\n//                 onClick={this.nameflageChange}\n//                 style={{ backgroundColor: 'white', color: '#0070eb' }}\n//                 class='btn btn-info'\n//               >\n//                 Cancel\n//               </button>\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n//     )\n//   }\n// }\n// // console.log(\"Inside search: \",this.props);\n// export default UpdateMenu","map":{"version":3,"sources":["/Users/kirankumarbijjala/Documents/Lab2/grubhub/Frontend/src/components/UpdateMenu/UpdateMenu.js"],"names":["React","Component","axios","cookie","Redirect","Link","getProfile","loginuser","updaterestaurantmenu","menudetails","getUserImage","connect","DisplayOwnerNav","Field","reduxForm","Menu","constructor","props","inputChangeHandler","e","setState","target","name","value","onSubmit","formValues","menuid","sessionStorage","getItem","data","dishname","description","price","baseprice","section","id","defaults","withCredentials","res","status","console","log","authFlag","history","push","alert","renderError","error","touched","color","renderInput","input","label","text","meta","state","menudtls","img","componentWillMount","temp","params","response","render","invalidtag","redirectVar","authFailed","updatePic","file","marginLeft","uploadImage","imageChangeHandler","handleSubmit","marginRight","dish_name","validate","mapStateToProps","owner","form"],"mappings":"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E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApDF,EAqDE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,KAAK,EAAC,cAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBArDF,EAwDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxDF,CADF,CAJF,CAnBF,CADF,CAHF,CADF,CADF,CALF,CAFF,CADF;AA0GD;;AAhO0B,C,CAkO7B;AACA;;;AAEA,MAAM0C,QAAQ,GAAGjD,UAAU,IAAI;AAC7B,QAAMsB,KAAK,GAAG,EAAd;;AACA,MAAI,CAACtB,UAAU,CAACK,QAAhB,EAA0B;AACxBiB,IAAAA,KAAK,CAACjB,QAAN,GAAiB,yBAAjB;AACD;;AACD,MAAI,CAACL,UAAU,CAACM,WAAhB,EAA6B;AAC3BgB,IAAAA,KAAK,CAAChB,WAAN,GAAoB,2BAApB;AACD;;AACD,MAAI,CAACN,UAAU,CAACQ,SAAhB,EAA2B;AACzBc,IAAAA,KAAK,CAACd,SAAN,GAAkB,yBAAlB;AACD;;AACD,MAAI,CAACR,UAAU,CAACS,OAAhB,EAAyB;AACvBa,IAAAA,KAAK,CAACb,OAAN,GAAgB,uBAAhB;AACD;;AACD,SAAOa,KAAP;AACD,CAfD;;AAiBA,MAAM4B,eAAe,GAAGpB,KAAK,IAAI;AAC/B,SAAO;AAAEqB,IAAAA,KAAK,EAAErB,KAAK,CAACqB;AAAf,GAAP;AACD,CAFD;;AAIA,eAAejE,OAAO,CACpBgE,eADoB,EAEpB;AAAEnE,EAAAA,oBAAF;AAAwBC,EAAAA;AAAxB,CAFoB,CAAP,CAIbK,SAAS,CAAC;AACR+D,EAAAA,IAAI,EAAE,kBADE;AAERH,EAAAA,QAAQ,EAAEA;AAFF,CAAD,CAAT,CAGG3D,IAHH,CAJa,CAAf,C,CAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["import React, { Component } from 'react'\nimport '../../App.css'\nimport './UpdateMenu.css'\nimport axios from 'axios'\nimport cookie from 'react-cookies'\nimport { Redirect } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport { getProfile } from '../../actions'\nimport { loginuser } from '../../actions'\nimport { updaterestaurantmenu } from '../../actions'\nimport { menudetails } from '../../actions'\n\nimport { getUserImage } from '../../actions'\nimport { connect } from 'react-redux'\nimport DisplayOwnerNav from '../Display/DisplayOwnerNav'\nimport { Field, reduxForm } from 'redux-form'\n\n// Define a Login Component\nclass Menu extends Component {\n  // call the constructor method\n  constructor (props) {\n    super(props)\n    this.state = {\n      authFlag: false,\n      menudtls: '',\n      img : ''\n    }\n  }\n\n  componentWillMount () {\n    this.setState({\n      authFlag: false\n    })\n    let temp = sessionStorage.getItem('menuid')\n    // alert(temp)\n    this.props.menudetails({ params: {id: temp} }, response => {\n      // console.log( this.props.user[1])\n      console.log(response)\n      this.setState({\n        menudtls: response.data\n      })\n    })\n  }\n\n  inputChangeHandler = e => {\n    this.setState({\n      [e.target.name]: e.target.value\n    })\n  }\n\n  onSubmit = formValues => {\n    // let val = JSON.parse(sessionStorage.getItem('ownerdata'))\n    let menuid = sessionStorage.getItem('menuid')\n    // console.log('temp : ' +val.email)\n    let data = {\n      dishname: formValues.dishname,\n      description: formValues.description,\n      price: formValues.baseprice,\n      section: formValues.section,\n      id: menuid\n    }\n    axios.defaults.withCredentials = true\n\n    this.props.updaterestaurantmenu(data, res => {\n      if (res.status === 200) {\n        console.log('Inside response', res.data[0])\n        this.setState({\n          authFlag: true\n        })\n\n        this.props.history.push('/ownerrestaurantmenu')\n      } else {\n        alert('Please enter valid credentials')\n      }\n    }) // ,(response)=>{ //   console.log('Redux test: ' + this.props.user); //   console.log('Redux response: ' + response); // }) // console.log(data); // this.props.login(data, (response)=>{ //   console.log('Redux test: ' + this.props.user) //   this.setState({ //     img: 'data:image/png;base64, ' + response.image //   }) // });\n  }\n\n  renderError = ({ error, touched }) => {\n    if (touched && error) {\n      return (\n        <div>\n          <label style={{ color: 'red' }}>{error}</label>\n        </div>\n      )\n    }\n  }\n\n  renderInput = ({ input, label, text, meta}) => {\n    return (\n      <div>\n        <div htmlFor='email' style={{ color: '#6b6b83' }}>\n          {label}:  {text}\n        </div>\n        <input\n          className='form-control'\n          // style={{ marginRight: '10px' }}\n          {...input}\n        />\n        {this.renderError(meta)}\n      </div>\n    )\n  }\n\n  render () {\n    // redirect based on successful login\n    // let redirectVar = null\n    let invalidtag = null\n    // if (!cookie.load('cookie')) {\n    //   redirectVar = <Redirect to='/login' />\n    // }\n\n    let redirectVar  = null\n    if (sessionStorage.getItem('JWT' === null)){ \n      redirectVar  = <Redirect to='/login'/>\n    }\n\n\n    if (this.state.authFailed) {\n      invalidtag = (\n        <label style={{ color: 'red' }}>*Invalid user name password!</label>\n      )\n    }\n    let updatePic = null\n\n    if (this.state.file !== '') {\n      updatePic = (\n        <button\n          style={{ marginLeft: '537px' }}\n          className='btn btn-link'\n          type='submit'\n        >\n                    Update\n        </button>\n      )\n    }\n\n    return (\n      <div>\n        {redirectVar}\n        <div className='row'>\n          <div className='col-sm-2'>\n            <DisplayOwnerNav />\n          </div>\n\n          <div className='col-sm-10'>\n            <div class='container'>\n              <div class='login-form'>\n                {/* <div class='main-div'> */}\n\n                <div className='row'>\n                  <div className='col-sm-6'>\n\n                  <form onSubmit={this.uploadImage} enctype='multipart/form-data'>\n                <div>\n                  <img\n                    src={this.state.img}\n                    width='200'\n                    height='200'\n                  />\n                  <input\n                    type='file'\n                    onChange={this.imageChangeHandler}\n                    name='myImage'\n                    id='myImage'\n                  />\n                  <br />\n                </div>\n              </form>\n\n                    <form\n                      className='ui form error'\n                      onSubmit={this.props.handleSubmit(this.onSubmit)}\n                    >\n                      <ul class='list-group'>\n                        <li class='list-group-item'>\n                          <br />\n                          <h2>Edit menu</h2>\n                          <div\n                            style={{ marginRight: '20px' }}\n                            class='form-group'\n                          >\n                            <Field\n                              class='form-control'\n                              name='dishname'\n                              component={this.renderInput}\n                              label=' Name'\n                              text= {this.state.menudtls.dish_name}\n                            />\n                          </div>\n                          <div\n                            style={{ marginRight: '20px' }}\n                            class='form-group'\n                          >\n                            <Field\n                              name='description'\n                              type='text'\n                              component={this.renderInput}\n                              label='Description'\n                              text= {this.state.menudtls.description}\n                            />\n                          </div>\n\n                          <div\n                            style={{ marginRight: '20px' }}\n                            class='form-group'\n                          >\n                            <Field\n                              name='section'\n                              component={this.renderInput}\n                              label='Menu Section'\n                              text= {this.state.menudtls.section}\n                            />\n                          </div>\n                          <br />\n                          <div\n                            style={{ marginRight: '20px' }}\n                            class='form-group'\n                          >\n                            <Field\n                              name='baseprice'\n                              type='text'\n                              component={this.renderInput}\n                              label='Base Price'\n                              text= {this.state.menudtls.price}\n                            />\n                          </div>\n                          <br />\n                          <button type='submit' class='btn btn-info'>\n                            Edit Menu\n                          </button>\n                          <br />\n                        </li>\n                      </ul>\n                    </form>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n// export Login Component\n// export default BuyerProfile\n\nconst validate = formValues => {\n  const error = {}\n  if (!formValues.dishname) {\n    error.dishname = 'Enter a valid dish name'\n  }\n  if (!formValues.description) {\n    error.description = 'Enter a valid description'\n  }\n  if (!formValues.baseprice) {\n    error.baseprice = 'Enter a valid baseprice'\n  }\n  if (!formValues.section) {\n    error.section = 'Enter a valid section'\n  }\n  return error\n}\n\nconst mapStateToProps = state => {\n  return { owner: state.owner }\n}\n\nexport default connect(\n  mapStateToProps,\n  { updaterestaurantmenu, menudetails }\n)(\n  reduxForm({\n    form: 'streamUpdateMenu',\n    validate: validate\n  })(Menu)\n)\n\n// import React, { Component } from 'react'\n// import '../../App.css'\n// import './Menu.css'\n// import axios from 'axios'\n// import cookie from 'react-cookies'\n// import { Redirect } from 'react-router'\n// import { Link } from 'react-router-dom'\n// import { getProfile } from '../../actions'\n\n// import { loginuser } from '../../actions'\n// import { restaurantmenu } from '../../actions'\n// import { getUserImage } from '../../actions'\n// import { connect } from 'react-redux'\n// import DisplayOwnerNav from '../Display/DisplayOwnerNav'\n// import { Field, reduxForm } from 'redux-form'\n\n// class UpdateMenu extends React.Component {\n\n//     onSubmit = (formValues) => {\n//         // console.log('OnSubmit' + formValues)\n//         if(this.state.file!==''){\n//           this.uploadImage()\n//         }\n//         let val = JSON.parse(sessionStorage.getItem('ownerdata'));\n//         // console.log('temp : ' +val.email)\n//         let data = {\n//           dishname: formValues.dishname,\n//           description: formValues.description,\n//           price: formValues.baseprice,\n//           section: formValues.section,\n//           zipcode: val.restaurant_zipcode,\n//           restaurantname: val.restaurant_name,\n//           id:\n//         }\n//         axios.defaults.withCredentials = true // console.log(data) // axios //   .post('http://localhost:3001/login', data) //   .then(response => { //     console.log('Status Code : ', response.status) //     if (response.status === 200) { //       sessionStorage.setItem('email', data.email) //       this.setState({ //         authFlag: true //       }) //     } //   }) //   .catch(err => { //     this.setState({ authFailed: true }) //   })\n//         this.props.updaterestaurantmenu(data, res => {\n//           if (res.status === 200) {\n//             console.log('Inside response', res.data[0])\n//             this.setState({\n//               authFlag: true\n//             })\n\n//             this.props.history.push('/restaurantmenu')\n//           } else {\n//             alert('Please enter valid credentials')\n//           }\n//         }) // ,(response)=>{ //   console.log('Redux test: ' + this.props.user); //   console.log('Redux response: ' + response); // }) // console.log(data); // this.props.login(data, (response)=>{ //   console.log('Redux test: ' + this.props.user) //   this.setState({ //     img: 'data:image/png;base64, ' + response.image //   }) // });\n//       }\n\n//     inputChangeHandler = e => {\n//         this.setState({\n//           [e.target.name]: e.target.value\n//         })\n//       }\n//   render () {\n//     console.log(this.props)\n//     return (\n//       <div>\n//         <div className='row'>\n//           <div class='form-group'>\n//             <div className='col-sm-4'>\n//               <div>Name</div>\n//               <input\n//                 onChange={this.inputChangeHandler}\n//                 type='text'\n//                 class='form-control'\n//                 name='firstname'\n//                 value={this.state.firstname}\n//               />\n//             </div>\n\n//             <div className='col-sm-4'>\n//               <div>Description</div>\n//               <input\n//                 onChange={this.inputChangeHandler}\n//                 type='text'\n//                 class='form-control'\n//                 name='lastname'\n//                 value={this.state.lastname}\n//               />\n//             </div>\n//           </div>\n//         </div>\n//         <br />\n//         <div className='row'>\n//           <div class='form-group'>\n//             <div className='col-sm-4'>\n//               <div>Menu Section</div>\n//               <input\n//                 onChange={this.inputChangeHandler}\n//                 type='text'\n//                 class='form-control'\n//                 name='pswd'\n//               />\n//             </div>\n//             <div className='col-sm-4'>\n//               <div>Base Price</div>\n//               <input\n//                 onChange={this.inputChangeHandler}\n//                 type='text'\n//                 class='form-control'\n//                 name='pswd'\n//               />\n//             </div>\n//           </div>\n//         </div>\n//         <br />\n//         <div className='row'>\n//           <div class='form-group'>\n//             <div className='col-sm-3'>\n//               <button\n//                 onClick={this.updateUserName}\n//                 style={{ backgroundColor: '#0070eb' }}\n//                 class='btn btn-info'\n//               >\n//                 Update name\n//               </button>\n//             </div>\n//             <div className='col-sm-3'>\n//               <button\n//                 onClick={this.nameflageChange}\n//                 style={{ backgroundColor: 'white', color: '#0070eb' }}\n//                 class='btn btn-info'\n//               >\n//                 Cancel\n//               </button>\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n//     )\n//   }\n// }\n// // console.log(\"Inside search: \",this.props);\n\n// export default UpdateMenu\n"]},"metadata":{},"sourceType":"module"}