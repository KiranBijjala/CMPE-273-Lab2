{"ast":null,"code":"import axios from \"axios\";\nexport const SUBMIT_LOGIN = \"submit_login\";\nconst ROOT_URL = \"http://localhost:3001\";\nexport function submitlogin(data) {\n  return function (dispatch) {\n    console.log('Inside Action:', data); // axios.defaults.withCredentials = true;\n\n    axios.post(ROOT_URL + '/login', data).then(response => {\n      console.log(response);\n\n      if (response.status === 200) {\n        //   localStorage.setItem(\"token\", response.data.Token);\n        console.log(\"useremail\", data.Email);\n        localStorage.setItem('email', data.Email);\n        console.log(localStorage.getItem('email'));\n        var resultData = {\n          UserName: response.data.UserName,\n          // Accounttype : response.data.Accounttype,\n          isAuthenticated: true\n        };\n        console.log('Result in action: ', resultData);\n        dispatch({\n          type: SUBMIT_LOGIN,\n          payload: resultData\n        });\n      } // else{\n      //         // if (err.response.status === 401) {\n      //          let resultData = {\n      //              isAuthenticated : false\n      //          }\n      //             // console.log(err);\n      //             // console.log('inside res status', err);\n      //              dispatch({\n      //                  type: AUTH_LOGIN,\n      //                  payload: resultData\n      //              });                        \n      //          //}\n      // }                            \n\n    }).catch(err => {\n      // if (err.response.status === 401) {\n      var resultData = {\n        isAuthenticated: false\n      };\n      console.log(err);\n      console.log('inside res status', err);\n      dispatch({\n        type: SUBMIT_LOGIN,\n        payload: resultData\n      }); //}\n    });\n  };\n} // export function submitlogin(values,callback) {\n//     console.log(values);\n//     axios.defaults.withCredentials = true;\n//     const request = axios\n//         .post(`${ROOT_URL}/login`, values);\n//     return (dispatch) =>\n//     {\n//      request.then( (res) => {\n//              console.log(\"In login response is : \" + JSON.stringify(res));\n//              dispatch(\n//                  {\n//                      type: SUBMIT_LOGIN,\n//                      payload: res.data\n//                  });\n//              callback(res);\n//          }\n//      );\n//     };\n// }\n// export function submitsignup(values,callback) {\n//     console.log(values);\n//     axios.defaults.withCredentials = true;\n//     const request = axios\n//         .post(`${ROOT_URL}/signup`, values);\n//     return (dispatch) =>\n//     {\n//         request.then( (res) => {\n//                 console.log(\"signup response is : \" + JSON.stringify(res));\n//                 dispatch(\n//                     {\n//                         type: CREATE_USER,\n//                         payload: res.data\n//                     });\n//                 callback(res);\n//             }\n//         );\n//     };\n// }","map":{"version":3,"sources":["/Users/kirankumarbijjala/Documents/Redux Grubhub Final/Frontend/src/actions/index.js"],"names":["axios","SUBMIT_LOGIN","ROOT_URL","submitlogin","data","dispatch","console","log","post","then","response","status","Email","localStorage","setItem","getItem","resultData","UserName","isAuthenticated","type","payload","catch","err"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,YAAY,GAAG,cAArB;AAEP,MAAMC,QAAQ,GAAG,uBAAjB;AAEA,OAAO,SAASC,WAAT,CAAqBC,IAArB,EAA2B;AAC9B,SAAO,UAAUC,QAAV,EAAoB;AACvBC,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BH,IAA9B,EADuB,CAEvB;;AACAJ,IAAAA,KAAK,CAACQ,IAAN,CAAWN,QAAQ,GAAG,QAAtB,EAAgCE,IAAhC,EACKK,IADL,CACUC,QAAQ,IAAI;AACdJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,QAAZ;;AACA,UAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AACzB;AACAL,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBH,IAAI,CAACQ,KAA9B;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BV,IAAI,CAACQ,KAAnC;AACAN,QAAAA,OAAO,CAACC,GAAR,CAAYM,YAAY,CAACE,OAAb,CAAqB,OAArB,CAAZ;AACA,YAAIC,UAAU,GAAG;AACbC,UAAAA,QAAQ,EAAEP,QAAQ,CAACN,IAAT,CAAca,QADX;AAEb;AACAC,UAAAA,eAAe,EAAE;AAHJ,SAAjB;AAKAZ,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCS,UAAlC;AACAX,QAAAA,QAAQ,CAAC;AACLc,UAAAA,IAAI,EAAElB,YADD;AAELmB,UAAAA,OAAO,EAAEJ;AAFJ,SAAD,CAAR;AAKH,OAlBa,CAmBd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACH,KAjCL,EAkCKK,KAlCL,CAkCYC,GAAD,IAAS;AACZ;AACA,UAAIN,UAAU,GAAG;AACbE,QAAAA,eAAe,EAAE;AADJ,OAAjB;AAGAZ,MAAAA,OAAO,CAACC,GAAR,CAAYe,GAAZ;AACAhB,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCe,GAAjC;AACAjB,MAAAA,QAAQ,CAAC;AACLc,QAAAA,IAAI,EAAElB,YADD;AAELmB,QAAAA,OAAO,EAAEJ;AAFJ,OAAD,CAAR,CAPY,CAWZ;AACH,KA9CL;AA+CH,GAlDD;AAmDH,C,CACD;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA","sourcesContent":["import axios from \"axios\";\n\nexport const SUBMIT_LOGIN = \"submit_login\";\n\nconst ROOT_URL = \"http://localhost:3001\";\n\nexport function submitlogin(data) {\n    return function (dispatch) {\n        console.log('Inside Action:', data);\n        // axios.defaults.withCredentials = true;\n        axios.post(ROOT_URL + '/login', data)\n            .then(response => {\n                console.log(response);\n                if (response.status === 200) {\n                    //   localStorage.setItem(\"token\", response.data.Token);\n                    console.log(\"useremail\", data.Email)\n                    localStorage.setItem('email', data.Email);\n                    console.log(localStorage.getItem('email'))\n                    var resultData = {\n                        UserName: response.data.UserName,\n                        // Accounttype : response.data.Accounttype,\n                        isAuthenticated: true\n                    }\n                    console.log('Result in action: ', resultData)\n                    dispatch({\n                        type: SUBMIT_LOGIN,\n                        payload: resultData\n                    });\n\n                }\n                // else{\n                //         // if (err.response.status === 401) {\n                //          let resultData = {\n                //              isAuthenticated : false\n                //          }\n                //             // console.log(err);\n                //             // console.log('inside res status', err);\n                //              dispatch({\n                //                  type: AUTH_LOGIN,\n                //                  payload: resultData\n                //              });                        \n                //          //}\n                // }                            \n            })\n            .catch((err) => {\n                // if (err.response.status === 401) {\n                var resultData = {\n                    isAuthenticated: false\n                }\n                console.log(err);\n                console.log('inside res status', err);\n                dispatch({\n                    type: SUBMIT_LOGIN,\n                    payload: resultData\n                });\n                //}\n            });\n    }\n}\n// export function submitlogin(values,callback) {\n//     console.log(values);\n//     axios.defaults.withCredentials = true;\n\n//     const request = axios\n//         .post(`${ROOT_URL}/login`, values);\n\n//     return (dispatch) =>\n//     {\n//      request.then( (res) => {\n//              console.log(\"In login response is : \" + JSON.stringify(res));\n//              dispatch(\n//                  {\n//                      type: SUBMIT_LOGIN,\n//                      payload: res.data\n//                  });\n//              callback(res);\n//          }\n//      );\n\n//     };\n// }\n\n// export function submitsignup(values,callback) {\n//     console.log(values);\n//     axios.defaults.withCredentials = true;\n//     const request = axios\n//         .post(`${ROOT_URL}/signup`, values);\n\n//     return (dispatch) =>\n//     {\n//         request.then( (res) => {\n//                 console.log(\"signup response is : \" + JSON.stringify(res));\n//                 dispatch(\n//                     {\n//                         type: CREATE_USER,\n//                         payload: res.data\n//                     });\n//                 callback(res);\n//             }\n//         );\n\n//     };\n// }\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}