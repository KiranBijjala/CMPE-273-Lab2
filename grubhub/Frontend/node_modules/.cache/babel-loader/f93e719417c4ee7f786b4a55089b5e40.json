{"ast":null,"code":"var _jsxFileName = \"/Users/kirankumarbijjala/Documents/Redux Grubhub Final/Frontend/src/components/Buyerprofile.js\";\nimport React, { Component } from 'react';\nimport '../App.css';\nimport '../css/Buyerprofile.css';\nimport axios from 'axios';\nimport cookie from 'react-cookies';\nimport { Redirect } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport '../css/new.css';\nimport { getProfile } from '../actions';\nimport { connect } from 'react-redux';\nimport { updateProfile } from '../actions';\nimport { Field, reduxForm } from 'redux-form';\nimport NavBar from './NavBar.js'; //Define a Login Component\n\nclass Buyerprofile extends Component {\n  //call the constructor method\n  constructor(props) {\n    //Call the constrictor of Super class i.e The Component\n    super(props); //maintain the state required for this component\n\n    this.fileSelectedHandler = e => {\n      console.log(e.target.files);\n\n      if (e.target.name == 'selectedFile') {\n        this.setState({\n          selectedFile: e.target.files[0]\n        });\n      } else {\n        this.setState({\n          [e.target.name]: e.target.value\n        });\n      }\n    };\n\n    this.uploadHandler = e => {\n      const fd = new FormData();\n      fd.append('selectedFile', this.state.selectedFile, this.state.selectedFile.name);\n      axios.post('http://localhost:3001/userprofile', fd).then(response => {\n        axios.post('http://localhost:3001/getprofilepic' + \"profile_\".concat(cookie.load('cookie'), \".png\")).then(response => {\n          console.log(response);\n          let newpic = 'data:image/jpg;base64, ' + response.data;\n          this.setState({\n            profilepic: newpic\n          });\n        });\n      });\n    };\n\n    this.inputChangeHandler = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.submitSignup = e => {\n      var headers = new Headers(); //prevent page from refresh\n\n      e.preventDefault();\n      const data = {\n        firstname: this.state.firstname,\n        lastname: this.state.lastname,\n        Email: this.state.Email,\n        password: this.state.password\n      }; //set the with credentials to true\n\n      axios.defaults.withCredentials = true; //make a post request with the user data\n\n      axios.post('http://localhost:3001/userprofile', data).then(response => {\n        console.log(\"Status Code : \", response.status);\n\n        if (response.status === 200) {\n          // <Redirect to=\"/home\"> </Redirect>\n          this.setState({\n            authFlag: true\n          });\n        } else {\n          this.setState({\n            authFlag: false\n          });\n        }\n      });\n    };\n\n    this.onSubmit = e => {\n      console.log(\"in submit profile\");\n      const data = {\n        firstname: this.state.firstname,\n        lastname: this.state.lastname,\n        Email: this.state.Email,\n        password: this.state.password,\n        phone: this.state.phone\n      };\n      console.log(\"in submit profile  data:\" + data);\n      this.props.updateProfile(data, res => {\n        console.log(\"update profile\", res.data);\n\n        if (res.status === 200) {\n          console.log(res.data[0]); // sessionStorage.setItem('Email', res.data[0].Email);\n          // this.props.history.push('/login');\n        }\n      });\n    };\n\n    this.renderInput = ({\n      input,\n      label,\n      meta\n    }) => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        htmlFor: \"email\",\n        style: {\n          color: 'black'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, label), React.createElement(\"input\", Object.assign({\n        className: \"form-control\"\n      }, input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      })), this.renderError(meta));\n    };\n\n    this.renderError = ({\n      error,\n      touched\n    }) => {\n      if (touched && error) {\n        return React.createElement(\"label\", {\n          style: {\n            color: 'red'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257\n          },\n          __self: this\n        }, error);\n      }\n    };\n\n    this.state = {\n      firstname: \"\",\n      lastname: \"\",\n      profilepic: '',\n      Email: \"\",\n      password: \"\",\n      nameflag: false,\n      authFlag: false,\n      failuser: false,\n      selectedFile: null,\n      phone: '',\n      newEmail: ''\n    };\n  } //Call the Will Mount to set the auth Flag to false\n\n\n  componentDidMount() {\n    let Email = sessionStorage.getItem('Email');\n    console.log(\"Email\" + Email);\n    axios.get('http://localhost:3001/userprofile', {\n      params: {\n        id: Email\n      }\n    }).then(response => {\n      //update the state with the response data\n      console.log(response);\n      console.log(response.data[0]);\n      this.setState({\n        firstname: response.data[0].firstname,\n        lastname: response.data[0].lastname,\n        password: response.data[0].password,\n        Email: Email,\n        phone: response.data[0].phone\n      });\n      console.log(\"In Home\");\n    });\n  } // componentDidMount() {\n  //     var data = {\n  //         Email: sessionStorage.getItem('Email')\n  //     }\n  //     console.log(\"data before get profile\", data)\n  //     this.props.getProfile(data, (res) => {\n  //         //var data = res.data;\n  //         console.log(\"In get profile\");\n  //         this.setState({\n  //             firstname: res.data[0].firstname,\n  //             lastname: res.data[0].lastname,\n  //             Email: res.data[0].Email,\n  //             phone: res.data[0].phone,\n  //             password: res.data[0].password\n  //         });\n  //     });\n  // }\n  // var Email = sessionStorage.getItem('Email')\n  // axios.get('http://localhost:3001/userprofile',{\n  //     params: {\n  //       id : Email\n  //     }})\n  //         .then((response) => {\n  //         //update the state with the response data\n  //         console.log(response);\n  //         console.log(response.data[0]);\n  //         this.setState({\n  //             firstname : response.data.firstname,\n  //             lastname : response.data.lastname,\n  //             // phone : response.data[0].phone,\n  //         });\n  //         console.log(\"In Home\");\n  //     });\n  //     let Email=cookie.load('cookie')\n  //     axios.get('https://localhost:30001/userprofile',{\n  //         params : Email\n  //     }).then(response=>{\n  //         console.log(response.data)\n  //         this.setState({\n  //         // Email:response.data.Email,\n  //         firstname: response.data.firstname,\n  //         lastname: response.data.lastname,\n  //         profilepic: response.data.profilepic,\n  //         password: response.data.password\n  //         })\n  //     })\n  // }\n  // componentWillMount() {\n  //     axios.post('http://localhost:3001/getprofilepic' + `profile_${cookie.load('cookie')}.png`)\n  //         .then(response => {\n  //             console.log(response);\n  //             let newpic = 'data:image/jpg;base64, ' + response.data;\n  //             this.setState({\n  //                 profilepic: newpic\n  //             })\n  //         })\n  // }\n\n\n  render() {\n    //redirect based on successful login\n    let createlogin = null;\n\n    if (!cookie.load('cookie')) {\n      createlogin = React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      });\n    }\n\n    let redirectVar = null;\n\n    if (this.state.authFlag) {\n      redirectVar = React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, createlogin, redirectVar, React.createElement(NavBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      onSubmit: this.props.handleSubmit(this.onSubmit),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-shift\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, \"Your account\"), React.createElement(\"ul\", {\n      class: \"nav flex-column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"new-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link active\",\n      href: \"/userprofile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"profilenew\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, \"Profile\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, \"Address and phone\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, \"Payments\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link \",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, \"Gift cards\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link new\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, \"Past orders\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, \"Upcoming orders\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, \"Refer a friend\"))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"nav-link\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }, \"Saved restaurants\")))))), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"login-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"column-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      style: {\n        fontWeight: \"bold\",\n        color: \"black\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }, \"Your account\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: this.state.profilepic,\n      style: {\n        height: \"151px\",\n        width: \"152px\",\n        margintop: \"20px\",\n        borderradius: \"90px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      type: \"file\",\n      name: \"selectedFile\",\n      onChange: this.fileSelectedHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.uploadHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }, \"Upload Photo\"), React.createElement(\"div\", {\n      className: \"editname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, \"Edit account\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontWeight: 'bold',\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, \"First name: \", this.state.firstname), React.createElement(\"div\", {\n      className: \"boxwidth-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"firstname\",\n      component: this.renderInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontWeight: 'bold',\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, \"Last name: \", this.state.lastname, \" \"), React.createElement(\"div\", {\n      className: \"boxwidth-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"lastname\",\n      component: this.renderInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontWeight: 'bold',\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }, \"Current password : ***** \"), React.createElement(\"div\", {\n      className: \"boxwidth-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"Email\",\n      component: this.renderInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontWeight: 'bold',\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }, \"Current Email: \", this.state.Email), React.createElement(\"div\", {\n      className: \"boxwidth-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"phone\",\n      component: this.renderInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontWeight: 'bold',\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }, \"Current Phone: \", this.state.phone), React.createElement(\"div\", {\n      className: \"boxwidth-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"password\",\n      component: this.renderInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"wrapperbutton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"button-edit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405\n      },\n      __self: this\n    }, \"update\")))))))));\n  }\n\n}\n\nconst validate = formValues => {\n  const error = {}; // Validate the inputs from 'values'\n\n  if (!formValues.firstname) {\n    error.firstname = \"Enter valid firstname\";\n  }\n\n  if (!formValues.lastname) {\n    error.lastname = \"Enter valid lastname\";\n  }\n\n  if (!formValues.Email) {\n    error.Email = \"Enter valid email\";\n  }\n\n  if (!formValues.phone) {\n    error.phone = \"Enter valid phone\";\n  }\n\n  if (!formValues.password) {\n    error.password = \"Enter valid password\";\n  } // If errors is empty, the form is fine to submit\n  // If errors has *any* properties, redux form assumes form is invalid\n\n\n  return error;\n};\n\nfunction mapStateToProps(state) {\n  return {\n    profile: state.profile\n  };\n}\n\nexport default connect(mapStateToProps, {\n  getProfile,\n  updateProfile\n})(reduxForm({\n  validate,\n  form: 'Profile_Form'\n})(Buyerprofile));","map":{"version":3,"sources":["/Users/kirankumarbijjala/Documents/Redux Grubhub Final/Frontend/src/components/Buyerprofile.js"],"names":["React","Component","axios","cookie","Redirect","Link","getProfile","connect","updateProfile","Field","reduxForm","NavBar","Buyerprofile","constructor","props","fileSelectedHandler","e","console","log","target","files","name","setState","selectedFile","value","uploadHandler","fd","FormData","append","state","post","then","response","load","newpic","data","profilepic","inputChangeHandler","submitSignup","headers","Headers","preventDefault","firstname","lastname","Email","password","defaults","withCredentials","status","authFlag","onSubmit","phone","res","renderInput","input","label","meta","color","renderError","error","touched","nameflag","failuser","newEmail","componentDidMount","sessionStorage","getItem","get","params","id","render","createlogin","redirectVar","handleSubmit","fontWeight","height","width","margintop","borderradius","fontSize","validate","formValues","mapStateToProps","profile","form"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,YAAP;AACA,OAAO,yBAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAO,gBAAP;AACA,SAASC,UAAT,QAA2B,YAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,aAAT,QAA8B,YAA9B;AACA,SAASC,KAAT,EAAgBC,SAAhB,QAAiC,YAAjC;AACA,OAAOC,MAAP,MAAmB,aAAnB,C,CAEA;;AACA,MAAMC,YAAN,SAA2BX,SAA3B,CAAqC;AACjC;AACAY,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf;AACA,UAAMA,KAAN,EAFe,CAGf;;AAHe,SA+GnBC,mBA/GmB,GA+GGC,CAAC,IAAI;AACvBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,MAAF,CAASC,KAArB;;AACA,UAAIJ,CAAC,CAACG,MAAF,CAASE,IAAT,IAAiB,cAArB,EAAqC;AACjC,aAAKC,QAAL,CAAc;AACVC,UAAAA,YAAY,EAAEP,CAAC,CAACG,MAAF,CAASC,KAAT,CAAe,CAAf;AADJ,SAAd;AAGH,OAJD,MAIO;AACH,aAAKE,QAAL,CAAc;AAAE,WAACN,CAAC,CAACG,MAAF,CAASE,IAAV,GAAiBL,CAAC,CAACG,MAAF,CAASK;AAA5B,SAAd;AACH;AACJ,KAxHkB;;AAAA,SA0HnBC,aA1HmB,GA0HHT,CAAC,IAAI;AACjB,YAAMU,EAAE,GAAG,IAAIC,QAAJ,EAAX;AACAD,MAAAA,EAAE,CAACE,MAAH,CAAU,cAAV,EAA0B,KAAKC,KAAL,CAAWN,YAArC,EAAmD,KAAKM,KAAL,CAAWN,YAAX,CAAwBF,IAA3E;AACAnB,MAAAA,KAAK,CAAC4B,IAAN,CAAW,mCAAX,EAAgDJ,EAAhD,EACKK,IADL,CACUC,QAAQ,IAAI;AACd9B,QAAAA,KAAK,CAAC4B,IAAN,CAAW,0DAAmD3B,MAAM,CAAC8B,IAAP,CAAY,QAAZ,CAAnD,SAAX,EACKF,IADL,CACUC,QAAQ,IAAI;AACdf,UAAAA,OAAO,CAACC,GAAR,CAAYc,QAAZ;AACA,cAAIE,MAAM,GAAG,4BAA4BF,QAAQ,CAACG,IAAlD;AACA,eAAKb,QAAL,CAAc;AACVc,YAAAA,UAAU,EAAEF;AADF,WAAd;AAGH,SAPL;AAQH,OAVL;AAWH,KAxIkB;;AAAA,SA2InBG,kBA3ImB,GA2IGrB,CAAD,IAAO;AACxB,WAAKM,QAAL,CAAc;AACV,SAACN,CAAC,CAACG,MAAF,CAASE,IAAV,GAAiBL,CAAC,CAACG,MAAF,CAASK;AADhB,OAAd;AAGH,KA/IkB;;AAAA,SAkJnBc,YAlJmB,GAkJHtB,CAAD,IAAO;AAClB,UAAIuB,OAAO,GAAG,IAAIC,OAAJ,EAAd,CADkB,CAElB;;AACAxB,MAAAA,CAAC,CAACyB,cAAF;AACA,YAAMN,IAAI,GAAG;AACTO,QAAAA,SAAS,EAAE,KAAKb,KAAL,CAAWa,SADb;AAETC,QAAAA,QAAQ,EAAE,KAAKd,KAAL,CAAWc,QAFZ;AAGTC,QAAAA,KAAK,EAAE,KAAKf,KAAL,CAAWe,KAHT;AAITC,QAAAA,QAAQ,EAAE,KAAKhB,KAAL,CAAWgB;AAJZ,OAAb,CAJkB,CAUlB;;AACA3C,MAAAA,KAAK,CAAC4C,QAAN,CAAeC,eAAf,GAAiC,IAAjC,CAXkB,CAYlB;;AACA7C,MAAAA,KAAK,CAAC4B,IAAN,CAAW,mCAAX,EAAgDK,IAAhD,EACKJ,IADL,CACUC,QAAQ,IAAI;AACdf,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8Bc,QAAQ,CAACgB,MAAvC;;AACA,YAAIhB,QAAQ,CAACgB,MAAT,KAAoB,GAAxB,EAA6B;AACzB;AACA,eAAK1B,QAAL,CAAc;AACV2B,YAAAA,QAAQ,EAAE;AADA,WAAd;AAGH,SALD,MAMK;AACD,eAAK3B,QAAL,CAAc;AACV2B,YAAAA,QAAQ,EAAE;AADA,WAAd;AAIH;AACJ,OAfL;AAgBH,KA/KkB;;AAAA,SA+MnBC,QA/MmB,GA+MPlC,CAAD,IAAO;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,YAAMiB,IAAI,GAAG;AACTO,QAAAA,SAAS,EAAE,KAAKb,KAAL,CAAWa,SADb;AAETC,QAAAA,QAAQ,EAAE,KAAKd,KAAL,CAAWc,QAFZ;AAGTC,QAAAA,KAAK,EAAE,KAAKf,KAAL,CAAWe,KAHT;AAITC,QAAAA,QAAQ,EAAE,KAAKhB,KAAL,CAAWgB,QAJZ;AAKTM,QAAAA,KAAK,EAAE,KAAKtB,KAAL,CAAWsB;AALT,OAAb;AAOAlC,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAA6BiB,IAAzC;AACA,WAAKrB,KAAL,CAAWN,aAAX,CAAyB2B,IAAzB,EACOiB,GAAD,IAAS;AACPnC,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BkC,GAAG,CAACjB,IAAlC;;AACA,YAAIiB,GAAG,CAACJ,MAAJ,KAAe,GAAnB,EAAwB;AACpB/B,UAAAA,OAAO,CAACC,GAAR,CAAYkC,GAAG,CAACjB,IAAJ,CAAS,CAAT,CAAZ,EADoB,CAEpB;AACA;AACH;AACJ,OARL;AASH,KAlOkB;;AAAA,SAmOnBkB,WAnOmB,GAmOL,CAAC;AAAEC,MAAAA,KAAF;AAASC,MAAAA,KAAT;AAAgBC,MAAAA;AAAhB,KAAD,KAA4B;AACtC,aAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACJ;AAAK,QAAA,OAAO,EAAC,OAAb;AAAqB,QAAA,KAAK,EAAE;AAAEC,UAAAA,KAAK,EAAE;AAAT,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKF,KADL,CADI,EAIJ;AAAO,QAAA,SAAS,EAAC;AAAjB,SAAoCD,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAJI,EAKH,KAAKI,WAAL,CAAiBF,IAAjB,CALG,CAAR;AAOH,KA3OkB;;AAAA,SA6OnBE,WA7OmB,GA6OL,CAAC;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAD,KAAwB;AAClC,UAAIA,OAAO,IAAID,KAAf,EAAsB;AAClB,eAAQ;AAAO,UAAA,KAAK,EAAE;AAAEF,YAAAA,KAAK,EAAE;AAAT,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAiCE,KAAjC,CAAR;AACH;AAGJ,KAnPkB;;AAIf,SAAK9B,KAAL,GAAa;AACTa,MAAAA,SAAS,EAAE,EADF;AAETC,MAAAA,QAAQ,EAAE,EAFD;AAGTP,MAAAA,UAAU,EAAE,EAHH;AAITQ,MAAAA,KAAK,EAAE,EAJE;AAKTC,MAAAA,QAAQ,EAAE,EALD;AAMTgB,MAAAA,QAAQ,EAAE,KAND;AAOTZ,MAAAA,QAAQ,EAAE,KAPD;AAQTa,MAAAA,QAAQ,EAAE,KARD;AASTvC,MAAAA,YAAY,EAAE,IATL;AAUT4B,MAAAA,KAAK,EAAE,EAVE;AAWTY,MAAAA,QAAQ,EAAE;AAXD,KAAb;AAaH,GAnBgC,CAqBjC;;;AAEAC,EAAAA,iBAAiB,GAAG;AAChB,QAAIpB,KAAK,GAAGqB,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAZ;AACAjD,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAQ0B,KAApB;AACA1C,IAAAA,KAAK,CAACiE,GAAN,CAAU,mCAAV,EAA+C;AAC3CC,MAAAA,MAAM,EAAE;AACJC,QAAAA,EAAE,EAAEzB;AADA;AADmC,KAA/C,EAIGb,IAJH,CAISC,QAAD,IAAc;AACd;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAYc,QAAZ;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAYc,QAAQ,CAACG,IAAT,CAAc,CAAd,CAAZ;AACA,WAAKb,QAAL,CAAc;AACVoB,QAAAA,SAAS,EAAEV,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBO,SADlB;AAEVC,QAAAA,QAAQ,EAAEX,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBQ,QAFjB;AAGVE,QAAAA,QAAQ,EAAEb,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBU,QAHjB;AAIVD,QAAAA,KAAK,EAACA,KAJI;AAKVO,QAAAA,KAAK,EAACnB,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBgB;AALb,OAAd;AAOAlC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACH,KAhBL;AAiBH,GA3CgC,CA6CjC;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AA2IAoD,EAAAA,MAAM,GAAG;AACL;AACA,QAAIC,WAAW,GAAG,IAAlB;;AAEA,QAAI,CAACpE,MAAM,CAAC8B,IAAP,CAAY,QAAZ,CAAL,EAA4B;AACxBsC,MAAAA,WAAW,GAAG,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAd;AACH;;AACD,QAAIC,WAAW,GAAG,IAAlB;;AACA,QAAI,KAAK3C,KAAL,CAAWoB,QAAf,EAAyB;AACrBuB,MAAAA,WAAW,GAAG,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAd;AACH;;AAED,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKD,WADL,EAEKC,WAFL,EAGI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,EAII;AAAM,MAAA,QAAQ,EAAE,KAAK1D,KAAL,CAAW2D,YAAX,CAAwB,KAAKvB,QAA7B,CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,EAEI;AAAI,MAAA,KAAK,EAAC,iBAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,SAAS,EAAC,iBAAb;AAA+B,MAAA,IAAI,EAAC,cAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAM,MAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,CADJ,CADJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI;AAAG,MAAA,SAAS,EAAC,UAAb;AAAwB,MAAA,IAAI,EAAC,GAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAM,MAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADA,CAAJ,CAJJ,EAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI;AAAG,MAAA,SAAS,EAAC,UAAb;AAAwB,MAAA,IAAI,EAAC,GAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAM,MAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,CAAJ,CANJ,EAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI;AAAG,MAAA,SAAS,EAAC,WAAb;AAAyB,MAAA,IAAI,EAAC,GAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAM,MAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,CAAJ,CARJ,EAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI;AAAG,MAAA,SAAS,EAAC,cAAb;AAA4B,MAAA,IAAI,EAAC,GAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAM,MAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADA,CAAJ,CAVJ,EAYI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI;AAAG,MAAA,SAAS,EAAC,UAAb;AAAwB,MAAA,IAAI,EAAC,GAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAM,MAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADA,CAAJ,CAZJ,EAcI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI;AAAG,MAAA,SAAS,EAAC,UAAb;AAAwB,MAAA,IAAI,EAAC,GAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAM,MAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADA,CAAJ,CAdJ,EAgBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI;AAAG,MAAA,SAAS,EAAC,UAAb;AAAwB,MAAA,IAAI,EAAC,GAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAM,MAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADA,CAAJ,CAhBJ,CAFJ,CADJ,CADJ,EA0BI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI;AAAK,MAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,KAAK,EAAE;AAAEwB,QAAAA,UAAU,EAAE,MAAd;AAAsBjB,QAAAA,KAAK,EAAE;AAA7B,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,CAFJ,EAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,GAAG,EAAE,KAAK5B,KAAL,CAAWO,UAArB;AAAiC,MAAA,KAAK,EAAE;AAAEuC,QAAAA,MAAM,EAAE,OAAV;AAAmBC,QAAAA,KAAK,EAAE,OAA1B;AAAmCC,QAAAA,SAAS,EAAE,MAA9C;AAAsDC,QAAAA,YAAY,EAAE;AAApE,OAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CANJ,EAUI;AACI,MAAA,IAAI,EAAC,MADT;AAEI,MAAA,IAAI,EAAC,cAFT;AAGI,MAAA,QAAQ,EAAE,KAAK/D,mBAHnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVJ,EAgBI;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,OAAO,EAAE,KAAKU,aAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAhBJ,EAmBI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,EACyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADzB,CAnBJ,EAsBI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAE;AAAEiD,QAAAA,UAAU,EAAE,MAAd;AAAsBK,QAAAA,QAAQ,EAAE;AAAhC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAmE,KAAKlD,KAAL,CAAWa,SAA9E,CADJ,EAEI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,KAAD;AAEI,MAAA,IAAI,EAAC,WAFT;AAGI,MAAA,SAAS,EAAE,KAAKW,WAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFJ,CAtBJ,EAkCI;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAE;AAAEqB,QAAAA,UAAU,EAAE,MAAd;AAAsBK,QAAAA,QAAQ,EAAE;AAAhC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAkE,KAAKlD,KAAL,CAAWc,QAA7E,MADJ,EAEI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,KAAD;AAEI,MAAA,IAAI,EAAC,UAFT;AAGI,MAAA,SAAS,EAAE,KAAKU,WAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFJ,CAlCJ,EA+CI;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAE;AAAEqB,QAAAA,UAAU,EAAE,MAAd;AAAsBK,QAAAA,QAAQ,EAAE;AAAhC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADJ,EAEI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,KAAD;AAEI,MAAA,IAAI,EAAC,OAFT;AAGI,MAAA,SAAS,EAAE,KAAK1B,WAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFJ,CA/CJ,EAiEI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAE;AAAEqB,QAAAA,UAAU,EAAE,MAAd;AAAsBK,QAAAA,QAAQ,EAAE;AAAhC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAsE,KAAKlD,KAAL,CAAWe,KAAjF,CADJ,EAEI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,KAAD;AAEI,MAAA,IAAI,EAAC,OAFT;AAGI,MAAA,SAAS,EAAE,KAAKS,WAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFJ,CAjEJ,EA8EI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAE;AAAEqB,QAAAA,UAAU,EAAE,MAAd;AAAsBK,QAAAA,QAAQ,EAAE;AAAhC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAsE,KAAKlD,KAAL,CAAWsB,KAAjF,CADJ,EAEI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,KAAD;AAEI,MAAA,IAAI,EAAC,UAFT;AAGI,MAAA,SAAS,EAAE,KAAKE,WAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFJ,CA9EJ,EA2FI;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAC,aAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CA3FJ,CADJ,CADJ,CADJ,CA1BJ,CADJ,CAJJ,CADJ;AA8IH;;AApZgC;;AAuZrC,MAAM2B,QAAQ,GAAIC,UAAD,IAAgB;AAE7B,QAAMtB,KAAK,GAAG,EAAd,CAF6B,CAI7B;;AACA,MAAI,CAACsB,UAAU,CAACvC,SAAhB,EAA2B;AACvBiB,IAAAA,KAAK,CAACjB,SAAN,GAAkB,uBAAlB;AACH;;AACD,MAAI,CAACuC,UAAU,CAACtC,QAAhB,EAA0B;AACtBgB,IAAAA,KAAK,CAAChB,QAAN,GAAiB,sBAAjB;AACH;;AACD,MAAI,CAACsC,UAAU,CAACrC,KAAhB,EAAuB;AACnBe,IAAAA,KAAK,CAACf,KAAN,GAAc,mBAAd;AACH;;AACD,MAAI,CAACqC,UAAU,CAAC9B,KAAhB,EAAuB;AACnBQ,IAAAA,KAAK,CAACR,KAAN,GAAc,mBAAd;AACH;;AACD,MAAI,CAAC8B,UAAU,CAACpC,QAAhB,EAA0B;AACtBc,IAAAA,KAAK,CAACd,QAAN,GAAiB,sBAAjB;AACH,GAnB4B,CAqB7B;AACA;;;AACA,SAAOc,KAAP;AACH,CAxBD;;AA0BA,SAASuB,eAAT,CAAyBrD,KAAzB,EAAgC;AAC5B,SAAO;AACHsD,IAAAA,OAAO,EAAEtD,KAAK,CAACsD;AADZ,GAAP;AAGH;;AAED,eAAe5E,OAAO,CAAC2E,eAAD,EAAkB;AAAC5E,EAAAA,UAAD;AAAaE,EAAAA;AAAb,CAAlB,CAAP,CAAuDE,SAAS,CAAC;AAC5EsE,EAAAA,QAD4E;AAE5EI,EAAAA,IAAI,EAAE;AAFsE,CAAD,CAAT,CAGnExE,YAHmE,CAAvD,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport '../App.css';\nimport '../css/Buyerprofile.css';\nimport axios from 'axios';\nimport cookie from 'react-cookies';\nimport { Redirect } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport '../css/new.css';\nimport { getProfile } from '../actions'\nimport { connect } from 'react-redux';\nimport { updateProfile } from '../actions';\nimport { Field, reduxForm } from 'redux-form';\nimport NavBar from './NavBar.js';\n\n//Define a Login Component\nclass Buyerprofile extends Component {\n    //call the constructor method\n    constructor(props) {\n        //Call the constrictor of Super class i.e The Component\n        super(props);\n        //maintain the state required for this component\n        this.state = {\n            firstname: \"\",\n            lastname: \"\",\n            profilepic: '',\n            Email: \"\",\n            password: \"\",\n            nameflag: false,\n            authFlag: false,\n            failuser: false,\n            selectedFile: null,\n            phone: '',\n            newEmail: ''\n        }\n    }\n\n    //Call the Will Mount to set the auth Flag to false\n\n    componentDidMount() {\n        let Email = sessionStorage.getItem('Email')\n        console.log(\"Email\"+Email);\n        axios.get('http://localhost:3001/userprofile', {\n            params: {\n                id: Email\n            }\n        }).then((response) => {\n                //update the state with the response data\n                console.log(response);\n                console.log(response.data[0]);\n                this.setState({\n                    firstname: response.data[0].firstname,\n                    lastname: response.data[0].lastname,\n                    password: response.data[0].password,\n                    Email:Email,\n                    phone:response.data[0].phone\n                });\n                console.log(\"In Home\");\n            });\n    }   \n\n    // componentDidMount() {\n    //     var data = {\n    //         Email: sessionStorage.getItem('Email')\n    //     }\n    //     console.log(\"data before get profile\", data)\n\n    //     this.props.getProfile(data, (res) => {\n\n    //         //var data = res.data;\n    //         console.log(\"In get profile\");\n\n    //         this.setState({\n    //             firstname: res.data[0].firstname,\n    //             lastname: res.data[0].lastname,\n    //             Email: res.data[0].Email,\n    //             phone: res.data[0].phone,\n    //             password: res.data[0].password\n\n    //         });\n    //     });\n\n    // }\n\n\n    // var Email = sessionStorage.getItem('Email')\n\n    // axios.get('http://localhost:3001/userprofile',{\n    //     params: {\n    //       id : Email\n    //     }})\n    //         .then((response) => {\n    //         //update the state with the response data\n    //         console.log(response);\n    //         console.log(response.data[0]);\n    //         this.setState({\n    //             firstname : response.data.firstname,\n    //             lastname : response.data.lastname,\n    //             // phone : response.data[0].phone,\n    //         });\n    //         console.log(\"In Home\");\n    //     });\n\n    //     let Email=cookie.load('cookie')\n    //     axios.get('https://localhost:30001/userprofile',{\n    //         params : Email\n    //     }).then(response=>{\n    //         console.log(response.data)\n    //         this.setState({\n    //         // Email:response.data.Email,\n    //         firstname: response.data.firstname,\n    //         lastname: response.data.lastname,\n    //         profilepic: response.data.profilepic,\n    //         password: response.data.password\n    //         })\n    //     })\n    // }\n\n    // componentWillMount() {\n    //     axios.post('http://localhost:3001/getprofilepic' + `profile_${cookie.load('cookie')}.png`)\n    //         .then(response => {\n    //             console.log(response);\n    //             let newpic = 'data:image/jpg;base64, ' + response.data;\n    //             this.setState({\n    //                 profilepic: newpic\n    //             })\n    //         })\n    // }\n\n    fileSelectedHandler = e => {\n        console.log(e.target.files);\n        if (e.target.name == 'selectedFile') {\n            this.setState({\n                selectedFile: e.target.files[0]\n            })\n        } else {\n            this.setState({ [e.target.name]: e.target.value });\n        }\n    }\n\n    uploadHandler = e => {\n        const fd = new FormData();\n        fd.append('selectedFile', this.state.selectedFile, this.state.selectedFile.name);\n        axios.post('http://localhost:3001/userprofile', fd)\n            .then(response => {\n                axios.post('http://localhost:3001/getprofilepic' + `profile_${cookie.load('cookie')}.png`)\n                    .then(response => {\n                        console.log(response);\n                        let newpic = 'data:image/jpg;base64, ' + response.data;\n                        this.setState({\n                            profilepic: newpic\n                        })\n                    })\n            })\n    }\n\n    //username change handler to update state variable with the text entered by the user\n    inputChangeHandler = (e) => {\n        this.setState({\n            [e.target.name]: e.target.value\n        })\n    }\n\n    //submit Login handler to send a request to the node backend\n    submitSignup = (e) => {\n        var headers = new Headers();\n        //prevent page from refresh\n        e.preventDefault();\n        const data = {\n            firstname: this.state.firstname,\n            lastname: this.state.lastname,\n            Email: this.state.Email,\n            password: this.state.password\n        }\n        //set the with credentials to true\n        axios.defaults.withCredentials = true;\n        //make a post request with the user data\n        axios.post('http://localhost:3001/userprofile', data)\n            .then(response => {\n                console.log(\"Status Code : \", response.status);\n                if (response.status === 200) {\n                    // <Redirect to=\"/home\"> </Redirect>\n                    this.setState({\n                        authFlag: true\n                    })\n                }\n                else {\n                    this.setState({\n                        authFlag: false\n\n                    })\n                }\n            })\n    }\n\n    // update = (e) => {   \n    //     const data = {\n    //         firstname : this.state.firstname,\n    //         lastname : this.state.lastname,\n    //         Email: this.state.Email,\n    //         phone:this.state.phone,\n    //         password:this.state.password\n    //     }\n    //     console.log(data);\n    //     //set the with credentials to true\n    //     axios.defaults.withCredentials = true;\n    //     //make a post request with the user data\n    //     axios.post('http://localhost:3001/update',data)\n    //         .then(response => {\n    //             console.log(\"Status Code  is : \",response.status);\n    //             console.log(response.data[0]);\n    //             if(response.status === 200){\n    //                 this.setState({\n    //                     firstname: response.data[0].firstname,\n    //                     lastname: response.data[0].lastname,\n    //                     password: response.data[0].password,\n    //                     Email:response.data[0].Email,\n    //                     phone:response.data[0].phone\n    //                 });\n    //             }else{\n    //                 console.log('Change failed !!! ');\n\n    //             }\n    //         });\n    // }\n    onSubmit = (e) => {\n        console.log(\"in submit profile\");\n        const data = {\n            firstname: this.state.firstname,\n            lastname: this.state.lastname,\n            Email: this.state.Email,\n            password: this.state.password,\n            phone: this.state.phone,\n        }\n        console.log(\"in submit profile  data:\" + data);\n        this.props.updateProfile(data\n            , (res) => {\n                console.log(\"update profile\", res.data);\n                if (res.status === 200) {\n                    console.log(res.data[0]);\n                    // sessionStorage.setItem('Email', res.data[0].Email);\n                    // this.props.history.push('/login');\n                }\n            })\n    }\n    renderInput = ({ input, label, meta }) => {\n        return (<div>\n            <div htmlFor='email' style={{ color: 'black' }}>\n                {label}\n            </div>\n            <input className=\"form-control\" {...input} />\n            {this.renderError(meta)}\n        </div>);\n    }\n\n    renderError = ({ error, touched }) => {\n        if (touched && error) {\n            return (<label style={{ color: 'red' }}>{error}</label>)\n        }\n\n\n    }\n\n\n\n\n    render() {\n        //redirect based on successful login\n        let createlogin = null;\n\n        if (!cookie.load('cookie')) {\n            createlogin = <Redirect to=\"/login\" />\n        }\n        let redirectVar = null;\n        if (this.state.authFlag) {\n            redirectVar = <Redirect to=\"/login\" />\n        }\n\n        return (\n            <div>\n                {createlogin}\n                {redirectVar}\n                <NavBar/>\n                <form onSubmit={this.props.handleSubmit(this.onSubmit)}>\n                    <div className=\"row\">\n                        <div className=\"col-sm-2\">\n                            <div className=\"col-shift\">\n                                <h2>Your account</h2>\n                                <ul class=\"nav flex-column\">\n                                    <li className=\"new-change\">\n                                        <a className=\"nav-link active\" href=\"/userprofile\" >\n                                            <span className=\"profilenew\">Profile</span></a></li>\n                                    <li><a className=\"nav-link\" href=\"#\" >\n                                        <span className=\"new\" >Address and phone</span></a></li>\n                                    <li><a className=\"nav-link\" href=\"#\" >\n                                        <span className=\"new\" >Payments</span></a></li>\n                                    <li><a className=\"nav-link \" href=\"#\" >\n                                        <span className=\"new\" >Gift cards</span></a></li>\n                                    <li><a className=\"nav-link new\" href=\"#\" >\n                                        <span className=\"new\" >Past orders</span></a></li>\n                                    <li><a className=\"nav-link\" href=\"#\">\n                                        <span className=\"new\" >Upcoming orders</span></a></li>\n                                    <li><a className=\"nav-link\" href=\"#\" >\n                                        <span className=\"new\" >Refer a friend</span></a></li>\n                                    <li><a className=\"nav-link\" href=\"#\" >\n                                        <span className=\"new\">Saved restaurants</span></a></li>\n                                </ul>\n                            </div>\n                        </div>\n\n                        <div className=\"col-sm-10\">\n                            <div class=\"container\">\n                                <div class=\"login-form\">\n                                    <div className=\"column-change\">\n                                        {/* <div class=\"main-div\"> */}\n                                        <div class=\"panel\">\n                                            <h2 style={{ fontWeight: \"bold\", color: \"black\" }}>Your account</h2>\n                                        </div>\n\n                                        <div>\n                                            <img src={this.state.profilepic} style={{ height: \"151px\", width: \"152px\", margintop: \"20px\", borderradius: \"90px\" }} />\n                                        </div>\n\n                                        <input\n                                            type=\"file\"\n                                            name=\"selectedFile\"\n                                            onChange={this.fileSelectedHandler}\n                                        />\n\n                                        <button type=\"button\" onClick={this.uploadHandler} >Upload Photo</button>\n\n\n                                        <div className=\"editname\">\n                                            <h3>Edit account</h3><br></br>\n                                        </div>\n                                        <div className=\"form-group\">\n                                            <div style={{ fontWeight: 'bold', fontSize: '18px' }}>First name: {this.state.firstname}</div>\n                                            <div className=\"boxwidth-change\">\n                                                <Field\n\n                                                    name=\"firstname\"\n                                                    component={this.renderInput}\n                                                />\n                                                {/* <input onChange={this.inputChangeHandler} type=\"text\" class=\"form-control\" name=\"firstname\" placeholder='Edit first name' /> */}\n                                            </div>\n                                        </div>\n\n                                        <div class=\"form-group\">\n                                            <div style={{ fontWeight: 'bold', fontSize: '18px' }}>Last name: {this.state.lastname} </div>\n                                            <div className=\"boxwidth-change\">\n                                                <Field\n\n                                                    name=\"lastname\"\n                                                    component={this.renderInput}\n                                                    \n                                                />\n                                                {/* <input onChange={this.inputChangeHandler} type=\"text\" class=\"form-control\" autoFocus name=\"lastname\" placeholder='Edit Last name'/> */}\n                                            </div>\n                                        </div>\n\n                                        <div class=\"form-group\">\n                                            <div style={{ fontWeight: 'bold', fontSize: '18px' }}>Current password : ***** </div>\n                                            <div className=\"boxwidth-change\">\n                                                <Field\n\n                                                    name=\"Email\"\n                                                    component={this.renderInput}\n                                                    \n                                                />\n                                                {/* <input\n                                                    onChange={this.inputChangeHandler}\n                                                    type=\"password\"\n                                                    placeholder=\"Edit Password\"\n                                                    class=\"form-control\"\n                                                    name=\"password\" /> */}\n                                            </div>\n                                        </div>\n\n                                        <div className=\"form-group\">\n                                            <div style={{ fontWeight: 'bold', fontSize: '18px' }}>Current Email: {this.state.Email}</div>\n                                            <div className=\"boxwidth-change\">\n                                                <Field\n\n                                                    name=\"phone\"\n                                                    component={this.renderInput}\n                                                    \n                                                />\n                                                {/* <input onChange={this.inputChangeHandler} type=\"text\" class=\"form-control\" name=\"Email\" placeholder='Edit Email' /> */}\n                                            </div>\n                                        </div>\n\n                                        <div className=\"form-group\">\n                                            <div style={{ fontWeight: 'bold', fontSize: '18px' }}>Current Phone: {this.state.phone}</div>\n                                            <div className=\"boxwidth-change\">\n                                                <Field\n\n                                                    name=\"password\"\n                                                    component={this.renderInput}\n                                                    \n                                                />\n                                                {/* <input onChange={this.inputChangeHandler} type=\"text\" class=\"form-control\" name=\"phone\" placeholder='Edit Phone' /> */}\n                                            </div>\n                                        </div>\n\n                                        <div className=\"wrapperbutton\">\n                                            <button type=\"submit\" className=\"button-edit\" >update</button>\n                                        </div>\n\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n\n\n\n\n        )\n    }\n}\n\nconst validate = (formValues) => {\n\n    const error = {};\n\n    // Validate the inputs from 'values'\n    if (!formValues.firstname) {\n        error.firstname = \"Enter valid firstname\";\n    }\n    if (!formValues.lastname) {\n        error.lastname = \"Enter valid lastname\";\n    }\n    if (!formValues.Email) {\n        error.Email = \"Enter valid email\";\n    }\n    if (!formValues.phone) {\n        error.phone = \"Enter valid phone\";\n    }\n    if (!formValues.password) {\n        error.password = \"Enter valid password\";\n    }\n\n    // If errors is empty, the form is fine to submit\n    // If errors has *any* properties, redux form assumes form is invalid\n    return error;\n}\n\nfunction mapStateToProps(state) {\n    return {\n        profile: state.profile\n    };\n}\n\nexport default connect(mapStateToProps, {getProfile, updateProfile })(reduxForm({\n    validate,\n    form: 'Profile_Form'\n})(Buyerprofile));\n"]},"metadata":{},"sourceType":"module"}