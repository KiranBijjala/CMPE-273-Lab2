{"ast":null,"code":"var _jsxFileName = \"/Users/kirankumarbijjala/Documents/Lab2/grubhub/Frontend/src/components/OwnerDetails/OwnerDetails.js\";\nimport React, { Component } from 'react';\nimport '../../App.css';\nimport axios from 'axios';\nimport cookie from 'react-cookies';\nimport { Redirect } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { restaurantcontact } from '../../actions';\nimport { Field, reduxForm } from 'redux-form';\nimport { connect } from 'react-redux';\nimport grubhub from '../../image/GrubhubDetails.jpg';\n\nvar CONST = require('../const/index');\n\nconst ROOT_URL = \"http://localhost:3001\"; // Define a Login Component\n\nclass OwnerDetails extends Component {\n  // call the constructor method\n  constructor(props) {\n    // Call the constrictor of Super class i.e The Component\n    super(props); // maintain the state required for this component\n\n    this.imageChangeHandler = e => {\n      // console.log('image change handle name: ' + e.target.name)\n      // console.log('image change handle value: ' + e.target.files[0])\n      this.setState({\n        file: e.target.files[0]\n      });\n    };\n\n    this.renderError = ({\n      error,\n      touched\n    }) => {\n      if (touched && error) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          style: {\n            color: 'red'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, error));\n      }\n    };\n\n    this.renderInput = ({\n      input,\n      label,\n      meta\n    }) => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        htmlFor: \"email\",\n        style: {\n          color: '#6b6b83'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, label), React.createElement(\"input\", Object.assign({\n        class: \"form-control\"\n      }, input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      })), this.renderError(meta));\n    };\n\n    this.uploadImage = e => {\n      e.preventDefault(); // var headers = new Headers();\n\n      const formData = new FormData(); // console.log(this.state.file.name)\n\n      let email = sessionStorage.getItem('email'); // this.setState({file.name:email})\n      // var imagedata = document.querySelector('input[type=\"file\"]').files[0];\n\n      formData.append('myImage', this.state.file, email); // formData.append('myImage', this.state.file, email )\n      // formData.append('email', email)\n\n      const config = {\n        headers: {\n          'content-type': 'multipart/form-data'\n        }\n      };\n      axios.post('/ownerimageform', formData, config).then(response => {\n        window.location.reload();\n        console.log('The file is successfully uploaded');\n      }).catch(error => {}); // prevent page from refresh\n    };\n\n    this.onSubmit = formValues => {\n      console.log('OnSubmit' + formValues);\n      let temp = sessionStorage.getItem('email'); // this.setState({\n      //   email: temp\n      // });\n\n      let data = {\n        address1: formValues.address1,\n        address2: formValues.address2,\n        phone: formValues.phone,\n        email: temp\n      };\n      axios.defaults.withCredentials = true;\n      this.props.restaurantcontact(data, res => {\n        if (res.status === 200) {\n          console.log('Inside response', res.data[0]);\n          this.setState({\n            authFlag: true\n          });\n          this.props.history.push('/menu');\n        } else {\n          alert('Please enter valid credentials');\n        }\n      });\n    };\n\n    this.inputChangeHandler = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.state = {\n      email: '',\n      file: '',\n      phone: '',\n      address1: '',\n      address2: '',\n      restaurantimg: '',\n      password: '',\n      authFlag: false,\n      authFailed: false\n    };\n  } // Call the Will Mount to set the auth Flag to false\n\n\n  componentWillMount() {\n    // let path = process.env.PUBLIC_URL\n    // path = path + '/profilepics/restaurant.png'\n    this.setState({\n      restaurantimg: '',\n      authFlag: false,\n      authFailed: false\n    });\n    let temp = sessionStorage.getItem('email');\n    let data = {\n      email: temp\n    };\n    axios.post(\"\".concat(ROOT_URL, \"/ownerimage\"), data).then(response => {\n      // update the state with the response data\n      console.log('Axios get:', response.data);\n      this.setState({\n        restaurantimg: 'data:image/png;base64, ' + response.data\n      });\n    });\n  }\n\n  render() {\n    let invalidtag = null;\n    let redirectVar = null;\n\n    if (sessionStorage.getItem('JWT' === null)) {\n      redirectVar = React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      });\n    }\n\n    let redirecthome = null;\n\n    if (this.state.authFlag) {\n      redirecthome = React.createElement(Redirect, {\n        to: \"/menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      });\n    }\n\n    if (this.state.authFailed) {\n      invalidtag = React.createElement(\"label\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"*Invalid user name password!\");\n    }\n\n    return React.createElement(\"div\", {\n      className: \"overlay\",\n      style: {\n        backgroundImage: \"url(\".concat(grubhub, \")\")\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, redirectVar, redirecthome, React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"login-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"main-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Restaurant Information\"), invalidtag), React.createElement(\"form\", {\n      onSubmit: this.uploadImage,\n      enctype: \"multipart/form-data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"preview text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Restaurant logo\"), React.createElement(\"img\", {\n      class: \"preview-restaurant-img\" // src='http://simpleicon.com/wp-content/uploads/account.png'\n      ,\n      src: this.state.restaurantimg,\n      alt: \"Restaurant logo\",\n      width: \"300\",\n      height: \"300\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      // class='browse-input'\n      type: \"file\",\n      onChange: this.imageChangeHandler,\n      name: \"myImage\",\n      id: \"myImage\",\n      className: \"btn btn-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      // style={{ marginLeft: '537px' }}\n      className: \"btn btn-link\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, \"Update\")), React.createElement(\"span\", {\n      class: \"Error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }))), React.createElement(\"form\", {\n      className: \"ui form error\",\n      onSubmit: this.props.handleSubmit(this.onSubmit),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"address1\",\n      component: this.renderInput,\n      label: \"Address 1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }), React.createElement(Field, {\n      name: \"address2\",\n      component: this.renderInput,\n      label: \"Address 2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }), React.createElement(Field, {\n      name: \"phone\",\n      component: this.renderInput,\n      label: \"Phone\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      class: \"btn btn-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, \"Next\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nconst validate = formValues => {\n  const error = {};\n\n  if (!formValues.address1) {\n    error.address1 = 'Enter a valid Address 1';\n  }\n\n  if (!formValues.address2) {\n    error.address2 = 'Enter a valid Address 2';\n  }\n\n  if (!formValues.phone) {\n    error.phone = 'Enter a valid Phone';\n  }\n\n  return error;\n}; // export default connect(null,{loginuser:loginuser})(formWrapped)\n\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user\n  };\n};\n\nexport default connect(mapStateToProps, {\n  restaurantcontact\n})(reduxForm({\n  form: 'streamLogin',\n  validate: validate\n})(OwnerDetails));","map":{"version":3,"sources":["/Users/kirankumarbijjala/Documents/Lab2/grubhub/Frontend/src/components/OwnerDetails/OwnerDetails.js"],"names":["React","Component","axios","cookie","Redirect","Link","restaurantcontact","Field","reduxForm","connect","grubhub","CONST","require","ROOT_URL","OwnerDetails","constructor","props","imageChangeHandler","e","setState","file","target","files","renderError","error","touched","color","renderInput","input","label","meta","uploadImage","preventDefault","formData","FormData","email","sessionStorage","getItem","append","state","config","headers","post","then","response","window","location","reload","console","log","catch","onSubmit","formValues","temp","data","address1","address2","phone","defaults","withCredentials","res","status","authFlag","history","push","alert","inputChangeHandler","name","value","restaurantimg","password","authFailed","componentWillMount","render","invalidtag","redirectVar","redirecthome","backgroundImage","fontWeight","handleSubmit","validate","mapStateToProps","user","form"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,eAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,iBAAT,QAAkC,eAAlC;AACA,SAASC,KAAT,EAAgBC,SAAhB,QAAiC,YAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,OAAP,MAAoB,gCAApB;;AACA,IAAIC,KAAK,GAAGC,OAAO,CAAC,gBAAD,CAAnB;;AACA,MAAMC,QAAQ,GAAG,uBAAjB,C,CACA;;AACA,MAAMC,YAAN,SAA2Bb,SAA3B,CAAqC;AACnC;AACAc,EAAAA,WAAW,CAAEC,KAAF,EAAS;AAClB;AACA,UAAMA,KAAN,EAFkB,CAGlB;;AAHkB,SAuCpBC,kBAvCoB,GAuCCC,CAAC,IAAI;AACxB;AACA;AACA,WAAKC,QAAL,CAAc;AACZC,QAAAA,IAAI,EAAEF,CAAC,CAACG,MAAF,CAASC,KAAT,CAAe,CAAf;AADM,OAAd;AAGD,KA7CmB;;AAAA,SA8CpBC,WA9CoB,GA8CN,CAAC;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAD,KAAwB;AACpC,UAAIA,OAAO,IAAID,KAAf,EAAsB;AACpB,eACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAO,UAAA,KAAK,EAAE;AAAEE,YAAAA,KAAK,EAAE;AAAT,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAiCF,KAAjC,CADF,CADF;AAKD;AACF,KAtDmB;;AAAA,SAwDpBG,WAxDoB,GAwDN,CAAC;AAAEC,MAAAA,KAAF;AAASC,MAAAA,KAAT;AAAgBC,MAAAA;AAAhB,KAAD,KAA4B;AACxC,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,OAAO,EAAC,OAAb;AAAqB,QAAA,KAAK,EAAE;AAAEJ,UAAAA,KAAK,EAAE;AAAT,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGG,KADH,CADF,EAIE;AAAO,QAAA,KAAK,EAAC;AAAb,SAAgCD,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAJF,EAKG,KAAKL,WAAL,CAAiBO,IAAjB,CALH,CADF;AASD,KAlEmB;;AAAA,SAoEpBC,WApEoB,GAoENb,CAAC,IAAI;AACjBA,MAAAA,CAAC,CAACc,cAAF,GADiB,CAEjB;;AACA,YAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB,CAHiB,CAIjB;;AAEA,UAAIC,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAZ,CANiB,CAOjB;AACA;;AACAJ,MAAAA,QAAQ,CAACK,MAAT,CAAgB,SAAhB,EAA2B,KAAKC,KAAL,CAAWnB,IAAtC,EAA4Ce,KAA5C,EATiB,CAUjB;AACA;;AACA,YAAMK,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT;AADI,OAAf;AAKAvC,MAAAA,KAAK,CACFwC,IADH,CACQ,iBADR,EAC2BT,QAD3B,EACqCO,MADrC,EAEGG,IAFH,CAEQC,QAAQ,IAAI;AAChBC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ;AACD,OALH,EAMGC,KANH,CAMS1B,KAAK,IAAI,CAAE,CANpB,EAjBiB,CAwBjB;AACD,KA7FmB;;AAAA,SA+FpB2B,QA/FoB,GA+FTC,UAAU,IAAI;AACvBJ,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAaG,UAAzB;AACA,UAAIC,IAAI,GAAGjB,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAX,CAFuB,CAGvB;AACA;AACA;;AACA,UAAIiB,IAAI,GAAG;AACTC,QAAAA,QAAQ,EAAEH,UAAU,CAACG,QADZ;AAETC,QAAAA,QAAQ,EAAEJ,UAAU,CAACI,QAFZ;AAGTC,QAAAA,KAAK,EAAEL,UAAU,CAACK,KAHT;AAITtB,QAAAA,KAAK,EAAEkB;AAJE,OAAX;AAMAnD,MAAAA,KAAK,CAACwD,QAAN,CAAeC,eAAf,GAAiC,IAAjC;AAEA,WAAK3C,KAAL,CAAWV,iBAAX,CAA6BgD,IAA7B,EAAmCM,GAAG,IAAI;AACxC,YAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtBb,UAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BW,GAAG,CAACN,IAAJ,CAAS,CAAT,CAA/B;AACA,eAAKnC,QAAL,CAAc;AACZ2C,YAAAA,QAAQ,EAAE;AADE,WAAd;AAIA,eAAK9C,KAAL,CAAW+C,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB;AACD,SAPD,MAOO;AACLC,UAAAA,KAAK,CAAC,gCAAD,CAAL;AACD;AACF,OAXD;AAYD,KAzHmB;;AAAA,SA2HpBC,kBA3HoB,GA2HChD,CAAC,IAAI;AACxB,WAAKC,QAAL,CAAc;AACZ,SAACD,CAAC,CAACG,MAAF,CAAS8C,IAAV,GAAiBjD,CAAC,CAACG,MAAF,CAAS+C;AADd,OAAd;AAGD,KA/HmB;;AAIlB,SAAK7B,KAAL,GAAa;AACXJ,MAAAA,KAAK,EAAE,EADI;AAEXf,MAAAA,IAAI,EAAE,EAFK;AAGXqC,MAAAA,KAAK,EAAE,EAHI;AAIXF,MAAAA,QAAQ,EAAE,EAJC;AAKXC,MAAAA,QAAQ,EAAE,EALC;AAMXa,MAAAA,aAAa,EAAE,EANJ;AAOXC,MAAAA,QAAQ,EAAE,EAPC;AAQXR,MAAAA,QAAQ,EAAE,KARC;AASXS,MAAAA,UAAU,EAAE;AATD,KAAb;AAWD,GAjBkC,CAkBnC;;;AACAC,EAAAA,kBAAkB,GAAI;AACpB;AACA;AAEA,SAAKrD,QAAL,CAAc;AACZkD,MAAAA,aAAa,EAAE,EADH;AAEZP,MAAAA,QAAQ,EAAE,KAFE;AAGZS,MAAAA,UAAU,EAAE;AAHA,KAAd;AAMA,QAAIlB,IAAI,GAAGjB,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAX;AAEA,QAAIiB,IAAI,GAAG;AAAEnB,MAAAA,KAAK,EAAEkB;AAAT,KAAX;AAEAnD,IAAAA,KAAK,CAACwC,IAAN,WAAc7B,QAAd,kBAAqCyC,IAArC,EAA2CX,IAA3C,CAAgDC,QAAQ,IAAI;AAC1D;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BL,QAAQ,CAACU,IAAnC;AACA,WAAKnC,QAAL,CAAc;AACZkD,QAAAA,aAAa,EAAE,4BAA4BzB,QAAQ,CAACU;AADxC,OAAd;AAGD,KAND;AAOD;;AA2FDmB,EAAAA,MAAM,GAAI;AAER,QAAIC,UAAU,GAAG,IAAjB;AAGA,QAAIC,WAAW,GAAI,IAAnB;;AACA,QAAIvC,cAAc,CAACC,OAAf,CAAuB,UAAU,IAAjC,CAAJ,EAA2C;AACzCsC,MAAAA,WAAW,GAAI,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAf;AACD;;AAGD,QAAIC,YAAY,GAAG,IAAnB;;AACA,QAAI,KAAKrC,KAAL,CAAWuB,QAAf,EAAyB;AACvBc,MAAAA,YAAY,GAAG,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAf;AACD;;AACD,QAAI,KAAKrC,KAAL,CAAWgC,UAAf,EAA2B;AACzBG,MAAAA,UAAU,GACR;AAAO,QAAA,KAAK,EAAE;AAAEhD,UAAAA,KAAK,EAAE;AAAT,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADF;AAGD;;AAED,WACE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAyB,MAAA,KAAK,EAAE;AAAEmD,QAAAA,eAAe,gBAASnE,OAAT;AAAjB,OAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGiE,WADH,EAEGC,YAFH,EAGE;AAAK,MAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,EAEGF,UAFH,CADF,EAME;AAAM,MAAA,QAAQ,EAAE,KAAK3C,WAArB;AAAkC,MAAA,OAAO,EAAC,qBAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAE;AAAE+C,QAAAA,UAAU,EAAE;AAAd,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAEE;AACE,MAAA,KAAK,EAAC,wBADR,CAEE;AAFF;AAGE,MAAA,GAAG,EAAE,KAAKvC,KAAL,CAAW8B,aAHlB;AAIE,MAAA,GAAG,EAAC,iBAJN;AAKE,MAAA,KAAK,EAAC,KALR;AAME,MAAA,MAAM,EAAC,KANT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE;AACA,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,QAAQ,EAAE,KAAKpD,kBAHjB;AAIE,MAAA,IAAI,EAAC,SAJP;AAKE,MAAA,EAAE,EAAC,SALL;AAME,MAAA,SAAS,EAAC,eANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,EAUE;AACE;AACA,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,IAAI,EAAC,QAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVF,CAVF,EA4BE;AAAM,MAAA,KAAK,EAAC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA5BF,CADF,CANF,EAwCE;AACE,MAAA,SAAS,EAAC,eADZ;AAEE,MAAA,QAAQ,EAAE,KAAKD,KAAL,CAAW+D,YAAX,CAAwB,KAAK5B,QAA7B,CAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,SAAS,EAAE,KAAKxB,WAFlB;AAGE,MAAA,KAAK,EAAC,WAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,EAUE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,SAAS,EAAE,KAAKA,WAFlB;AAGE,MAAA,KAAK,EAAC,WAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVF,EAeE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfF,EAgBE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,SAAS,EAAE,KAAKA,WAFlB;AAGE,MAAA,KAAK,EAAC,OAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhBF,EAqBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArBF,EAsBE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,KAAK,EAAC,cAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAtBF,EAyBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzBF,CAxCF,CADF,CADF,CAHF,CADF,CADF;AAgFD;;AAxOkC;;AA2OrC,MAAMqD,QAAQ,GAAG5B,UAAU,IAAI;AAC7B,QAAM5B,KAAK,GAAG,EAAd;;AACA,MAAI,CAAC4B,UAAU,CAACG,QAAhB,EAA0B;AACxB/B,IAAAA,KAAK,CAAC+B,QAAN,GAAiB,yBAAjB;AACD;;AACD,MAAI,CAACH,UAAU,CAACI,QAAhB,EAA0B;AACxBhC,IAAAA,KAAK,CAACgC,QAAN,GAAiB,yBAAjB;AACD;;AACD,MAAI,CAACJ,UAAU,CAACK,KAAhB,EAAuB;AACrBjC,IAAAA,KAAK,CAACiC,KAAN,GAAc,qBAAd;AACD;;AACD,SAAOjC,KAAP;AACD,CAZD,C,CAcA;;;AACA,MAAMyD,eAAe,GAAG1C,KAAK,IAAI;AAC/B,SAAO;AAAE2C,IAAAA,IAAI,EAAE3C,KAAK,CAAC2C;AAAd,GAAP;AACD,CAFD;;AAIA,eAAezE,OAAO,CACpBwE,eADoB,EAEpB;AAAE3E,EAAAA;AAAF,CAFoB,CAAP,CAIbE,SAAS,CAAC;AACR2E,EAAAA,IAAI,EAAE,aADE;AAERH,EAAAA,QAAQ,EAAEA;AAFF,CAAD,CAAT,CAGGlE,YAHH,CAJa,CAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport '../../App.css'\r\nimport axios from 'axios'\r\nimport cookie from 'react-cookies'\r\nimport { Redirect } from 'react-router'\r\nimport { Link } from 'react-router-dom'\r\nimport { restaurantcontact } from '../../actions'\r\nimport { Field, reduxForm } from 'redux-form'\r\nimport { connect } from 'react-redux'\r\nimport grubhub from '../../image/GrubhubDetails.jpg'\r\nvar CONST = require('../const/index');\r\nconst ROOT_URL = \"http://localhost:3001\";\r\n// Define a Login Component\r\nclass OwnerDetails extends Component {\r\n  // call the constructor method\r\n  constructor (props) {\r\n    // Call the constrictor of Super class i.e The Component\r\n    super(props)\r\n    // maintain the state required for this component\r\n    this.state = {\r\n      email: '',\r\n      file: '',\r\n      phone: '',\r\n      address1: '',\r\n      address2: '',\r\n      restaurantimg: '',\r\n      password: '',\r\n      authFlag: false,\r\n      authFailed: false\r\n    }\r\n  }\r\n  // Call the Will Mount to set the auth Flag to false\r\n  componentWillMount () {\r\n    // let path = process.env.PUBLIC_URL\r\n    // path = path + '/profilepics/restaurant.png'\r\n\r\n    this.setState({\r\n      restaurantimg: '',\r\n      authFlag: false,\r\n      authFailed: false\r\n    })\r\n\r\n    let temp = sessionStorage.getItem('email')\r\n\r\n    let data = { email: temp }\r\n\r\n    axios.post(`${ROOT_URL}/ownerimage`, data).then(response => {\r\n      // update the state with the response data\r\n      console.log('Axios get:', response.data)\r\n      this.setState({\r\n        restaurantimg: 'data:image/png;base64, ' + response.data\r\n      })\r\n    })\r\n  }\r\n  imageChangeHandler = e => {\r\n    // console.log('image change handle name: ' + e.target.name)\r\n    // console.log('image change handle value: ' + e.target.files[0])\r\n    this.setState({\r\n      file: e.target.files[0]\r\n    })\r\n  }\r\n  renderError = ({ error, touched }) => {\r\n    if (touched && error) {\r\n      return (\r\n        <div>\r\n          <label style={{ color: 'red' }}>{error}</label>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  renderInput = ({ input, label, meta }) => {\r\n    return (\r\n      <div>\r\n        <div htmlFor='email' style={{ color: '#6b6b83' }}>\r\n          {label}\r\n        </div>\r\n        <input class='form-control' {...input} />\r\n        {this.renderError(meta)}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  uploadImage = e => {\r\n    e.preventDefault()\r\n    // var headers = new Headers();\r\n    const formData = new FormData()\r\n    // console.log(this.state.file.name)\r\n\r\n    let email = sessionStorage.getItem('email')\r\n    // this.setState({file.name:email})\r\n    // var imagedata = document.querySelector('input[type=\"file\"]').files[0];\r\n    formData.append('myImage', this.state.file, email)\r\n    // formData.append('myImage', this.state.file, email )\r\n    // formData.append('email', email)\r\n    const config = {\r\n      headers: {\r\n        'content-type': 'multipart/form-data'\r\n      }\r\n    }\r\n    axios\r\n      .post('/ownerimageform', formData, config)\r\n      .then(response => {\r\n        window.location.reload()\r\n        console.log('The file is successfully uploaded')\r\n      })\r\n      .catch(error => {})\r\n    // prevent page from refresh\r\n  }\r\n\r\n  onSubmit = formValues => {\r\n    console.log('OnSubmit' + formValues)\r\n    let temp = sessionStorage.getItem('email')\r\n    // this.setState({\r\n    //   email: temp\r\n    // });\r\n    let data = {\r\n      address1: formValues.address1,\r\n      address2: formValues.address2,\r\n      phone: formValues.phone,\r\n      email: temp\r\n    }\r\n    axios.defaults.withCredentials = true\r\n\r\n    this.props.restaurantcontact(data, res => {\r\n      if (res.status === 200) {\r\n        console.log('Inside response', res.data[0])\r\n        this.setState({\r\n          authFlag: true\r\n        })\r\n\r\n        this.props.history.push('/menu')\r\n      } else {\r\n        alert('Please enter valid credentials')\r\n      }\r\n    })\r\n  }\r\n\r\n  inputChangeHandler = e => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  render () {\r\n    \r\n    let invalidtag = null\r\n    \r\n\r\n    let redirectVar  = null\r\n    if (sessionStorage.getItem('JWT' === null)){ \r\n      redirectVar  = <Redirect to='/login'/>\r\n    }\r\n\r\n\r\n    let redirecthome = null\r\n    if (this.state.authFlag) {\r\n      redirecthome = <Redirect to='/menu' />\r\n    }\r\n    if (this.state.authFailed) {\r\n      invalidtag = (\r\n        <label style={{ color: 'red' }}>*Invalid user name password!</label>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div className='overlay' style={{ backgroundImage: `url(${grubhub})` }}>\r\n        <div>\r\n          {redirectVar}\r\n          {redirecthome}\r\n          <div class='container'>\r\n            <div class='login-form'>\r\n              <div class='main-div'>\r\n                <div class='panel'>\r\n                  <h2>Restaurant Information</h2>\r\n                  {invalidtag}\r\n                </div>\r\n\r\n                <form onSubmit={this.uploadImage} enctype='multipart/form-data'>\r\n                  <div class='preview text-center'>\r\n                    <div style={{ fontWeight: 'bold' }}>Restaurant logo</div>\r\n                    <img\r\n                      class='preview-restaurant-img'\r\n                      // src='http://simpleicon.com/wp-content/uploads/account.png'\r\n                      src={this.state.restaurantimg}\r\n                      alt='Restaurant logo'\r\n                      width='300'\r\n                      height='300'\r\n                    />\r\n                    <div>\r\n                      <input\r\n                        // class='browse-input'\r\n                        type='file'\r\n                        onChange={this.imageChangeHandler}\r\n                        name='myImage'\r\n                        id='myImage'\r\n                        className='btn btn-light'\r\n                      />\r\n                      <br />\r\n                      <button\r\n                        // style={{ marginLeft: '537px' }}\r\n                        className='btn btn-link'\r\n                        type='submit'\r\n                      >\r\n                        Update\r\n                      </button>\r\n                    </div>\r\n                    <span class='Error' />\r\n                  </div>\r\n                  {/* {updatePic} */}\r\n                </form>\r\n\r\n                <form\r\n                  className='ui form error'\r\n                  onSubmit={this.props.handleSubmit(this.onSubmit)}\r\n                >\r\n                  <Field\r\n                    name='address1'\r\n                    component={this.renderInput}\r\n                    label='Address 1'\r\n                  />\r\n                  <br />\r\n                  <Field\r\n                    name='address2'\r\n                    component={this.renderInput}\r\n                    label='Address 2'\r\n                  />\r\n                  <br />\r\n                  <Field\r\n                    name='phone'\r\n                    component={this.renderInput}\r\n                    label='Phone'\r\n                  />\r\n                  <br />\r\n                  <button type='submit' class='btn btn-info'>\r\n                    Next\r\n                  </button>\r\n                  <br />\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst validate = formValues => {\r\n  const error = {}\r\n  if (!formValues.address1) {\r\n    error.address1 = 'Enter a valid Address 1'\r\n  }\r\n  if (!formValues.address2) {\r\n    error.address2 = 'Enter a valid Address 2'\r\n  }\r\n  if (!formValues.phone) {\r\n    error.phone = 'Enter a valid Phone'\r\n  }\r\n  return error\r\n}\r\n\r\n// export default connect(null,{loginuser:loginuser})(formWrapped)\r\nconst mapStateToProps = state => {\r\n  return { user: state.user }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { restaurantcontact }\r\n)(\r\n  reduxForm({\r\n    form: 'streamLogin',\r\n    validate: validate\r\n  })(OwnerDetails)\r\n)\r\n\r\n"]},"metadata":{},"sourceType":"module"}